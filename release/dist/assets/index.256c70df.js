var se=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var z=(t,e,n)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e)=>{for(var n in e||(e={}))ie.call(e,n)&&z(t,n,e[n]);if(J)for(var n of J(e))le.call(e,n)&&z(t,n,e[n]);return t},y=(t,e)=>oe(t,ae(e));import{o,c as i,r as G,d as w,a,t as c,b as p,w as F,e as f,f as v,$ as C,n as P,p as q,g as U,h as M,v as N,i as I,F as _,j as k,k as $,l as m,u as R,M as re,m as D,q as K,s as Y,x as de,y as ue,z as pe}from"./vendor.b8c87f52.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}};ce();var T=(t,e)=>{const n=t.__vccOpts||t;for(const[s,l]of e)n[s]=l;return n};const ge={},fe={class:"blackoutBackground"};function he(t,e){return o(),i("div",fe,[G(t.$slots,"default",{},void 0,!0)])}var me=T(ge,[["render",he],["__scopeId","data-v-34085a60"]]);const _e={class:"btnContainer"},ye={props:{title:{default:"Popup",type:String},hideConfirm:{default:!1,type:Boolean},hideCancel:{default:!1,type:Boolean},confirmText:{default:"Confirm",type:String},cancelText:{default:"Cancel",type:String},noBlackBg:{default:!1,type:Boolean},focus:{default:null,required:!1,type:Object},extRetProp:{default:[],required:!1}},methods:{checkInputs(t){let e=Array.from(this.getInputs());e=e.filter(l=>!l.hasAttribute("popupIgnore"));let n=!0,s={};for(let l of e)if((!l.value||l.value=="")&&!l.hasAttribute("optional"))this.blinkBgColor(l),n=!1;else{let r=l.name,u=!0;if(l.hasAttribute("regex")&&!(l.value==""&&l.hasAttribute("optional"))&&(u=l.value.match(new RegExp(l.getAttribute("regex"))),u||(n=!1,this.blinkBgColor(l))),u)if(l.nodeName=="SELECT"&&l.hasAttribute("multiple")){let g=[...l.querySelectorAll("option")].filter(d=>d.selected),A=[];for(let d of g)A.push(d._value);s[r]=A}else l.type=="checkbox"?s[r]=l.checked:s[r]=l.value}s=h(h({},s),this.extRetProp),n&&this.$emit("confirmBtnClick",s)},blinkBgColor(t,e="#a228"){if(t instanceof Array)for(let n of t)this.rawBlink(n,e);else this.rawBlink(t,e)},rawBlink(t,e){t.style.backgroundColor=e,setTimeout(()=>{t.style.backgroundColor=""},2e3)},getInputs(){return this.$el.querySelectorAll("input,select")},blinkAll(t="#a228"){for(let e of this.getInputs())this.rawBlink(e,t)},blinkName(t,e="#a228"){this.rawBlink(this.$el.querySelector('input[name="'+t+'"]'),e)}},created(){this.$nextTick(()=>{var t;this.focus?this.focus.focus():(t=this.getInputs()[0])==null||t.focus()})}},ve=w(y(h({},ye),{setup(t){return(e,n)=>(o(),i("div",{class:"popupContainer",onKeyup:[n[2]||(n[2]=F(s=>s.target&&s.target.nodeName!=="TEXTAREA"&&e.checkInputs,["enter"])),n[3]||(n[3]=F(s=>t.hideCancel?"":e.$emit("cancelBtnClick"),["escape"]))]},[a("h1",null,c(t.title),1),G(e.$slots,"default",{},void 0,!0),a("div",_e,[t.hideCancel?p("",!0):(o(),i("button",{key:0,id:"btnCancel",onClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick"))},c(t.cancelText),1)),t.hideConfirm?p("",!0):(o(),i("button",{key:1,id:"btnConfirm",onClick:n[1]||(n[1]=(...s)=>e.checkInputs&&e.checkInputs(...s))},c(t.confirmText),1))])],32))}}));var b=T(ve,[["__scopeId","data-v-42c7b0b8"]]);const Ce=a("input",{name:"username",type:"text",placeholder:"Username"},null,-1),be=a("input",{name:"password",type:"password",placeholder:"Password"},null,-1),ke={methods:{loginBtnClick(t){console.log("attempting login",t),C.ajax({url:"/api/login",type:"post",data:t,dataType:"json",success:e=>{console.log(e),this.$emit("login_done"),location.reload()},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})}},components:{popup:b}},we=w(y(h({},ke),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Login","confirm-text":"Login",onCancelBtnClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.loginBtnClick,"hide-cancel":!1},{default:v(()=>[Ce,be]),_:1},8,["onConfirmBtnClick"]))}}));const V=t=>(q("data-v-491c6b2e"),t=t(),U(),t),$e=V(()=>a("input",{name:"username",type:"text",placeholder:"Username"},null,-1)),Te=V(()=>a("input",{name:"password",type:"password",placeholder:"Password"},null,-1)),Se=V(()=>a("input",{name:"conf_password",type:"password",placeholder:"Confirm Password"},null,-1)),Re={key:0,name:"clan_code",type:"text",placeholder:"Clan Code",optional:""},Ae={key:1,name:"discord_username",type:"text",placeholder:"Discord Username",optional:"",regex:"^.{3,32}#[0-9]{4}$"},je={props:{root_user_registration:{required:!1,type:Boolean,default:!1}},methods:{confBtnClick(t){const e=this.$refs.popupLogin;t.password==t.conf_password?(console.log("attempting signup",t),C.ajax({url:"/api/signup",type:"post",data:t,dataType:"json",success:n=>{console.log(n),this.$emit("registration_done"),location.reload()},error:n=>{n.responseJSON.field?e.blinkName(n.responseJSON.field):e.blinkAll(),console.error("error",n)}})):(e.blinkName("password"),e.blinkName("conf_password"))}},components:{popup:b}},Be=w(y(h({},je),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",class:P({rootRegistration:t.root_user_registration}),title:t.root_user_registration?"Register Root User":"Sign Up","confirm-text":"Sign Up",onCancelBtnClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confBtnClick,"hide-cancel":t.root_user_registration},{default:v(()=>[$e,Te,Se,t.root_user_registration?p("",!0):(o(),i("input",Re)),t.root_user_registration?p("",!0):(o(),i("input",Ae))]),_:1},8,["class","title","onConfirmBtnClick","hide-cancel"]))}}));var Z=T(Be,[["__scopeId","data-v-491c6b2e"]]);const Pe={props:{visible:{type:Boolean}}};function Le(t,e,n,s,l,r){return o(),i("div",{id:"tabBrowser",class:P({visible:n.visible})},[G(t.$slots,"default",{},void 0,!0)],2)}var Me=T(Pe,[["render",Le],["__scopeId","data-v-2dda0152"]]);const Ie={props:{title:{default:"Button",type:String},currentTab:{default:"Home",type:String}}};function Ge(t,e,n,s,l,r){return o(),i("button",{onClick:e[0]||(e[0]=u=>t.$emit("updateTab",n.title)),class:P([n.title==n.currentTab?"active":""])},c(n.title),3)}var Ne=T(Ie,[["render",Ge],["__scopeId","data-v-0ef7f6ff"]]);const De={props:{visible:{type:Boolean},horizontal:{type:Boolean,default:!1},currentTab:{type:String,default:""},complex:{type:Boolean,default:!1}}};function qe(t,e,n,s,l,r){return o(),i("div",{class:P(["tab",{horizontal:n.horizontal,[n.currentTab]:!0,complex:n.complex}])},[G(t.$slots,"default",{},void 0,!0)],2)}var j=T(De,[["render",qe],["__scopeId","data-v-a5ea1eb0"]]);const Ue={data(){return{models:{searchOption:""},optRefs:[],valRet:[]}},props:{elements:{required:!0,default:[]},title:{required:!1,type:String,default:""},oIdKey:{required:!0,type:String},oTitleKey:{required:!0,type:String},preselect:{required:!1,default:[]}},methods:{log:console.log,compare:function(t,e){return t.includes(e)},optionSelectChanged:function(t){const e=t.target;e.checked?this.valRet.push(e.name):this.valRet=this.valRet.filter(n=>n!=e.name),this.$emit("selectChanged",[...this.valRet])},arrIncludesObj:function(t,e){return t.find(n=>JSON.stringify(n)==JSON.stringify(e))!=null},preselectProcedure:function(){if(typeof this.preselect[0]=="object"){const t=this.preselect.filter(e=>this.elements.find(n=>e[this.oIdKey]==n[this.oIdKey]));for(let e of t)t.includes(e[this.oIdKey])||this.valRet.push(e[this.oIdKey])}else{const t=this.preselect.filter(e=>this.elements.includes(e)||this.elements.find(n=>e==n[this.oIdKey]));this.valRet=t}this.$emit("selectChanged",[...this.valRet])}},created(){this.preselectProcedure()},updated(){this.preselectProcedure()}},Ke={class:"multipleSelectContainer"},Oe={class:"multipleSelectHeader"},Ee={key:0},Ve={class:"optionsContainer"},We=["name","checked"];function He(t,e,n,s,l,r){return o(),i("div",Ke,[a("div",Oe,[n.title!=""?(o(),i("h4",Ee,c(n.title),1)):p("",!0),M(a("input",{popupIgnore:"",type:"text","onUpdate:modelValue":e[0]||(e[0]=u=>l.models.searchOption=u),placeholder:"Search"},null,512),[[N,l.models.searchOption],[I,n.elements.length>5]])]),a("div",Ve,[(o(!0),i(_,null,k(n.elements,u=>M((o(),i("label",{key:u[n.oIdKey]},[a("input",{popupIgnore:"",ref_for:!0,ref:g=>l.optRefs.push(g),type:"checkbox",name:u[n.oIdKey],checked:n.preselect.includes(u[n.oIdKey])||r.arrIncludesObj(n.preselect,u),onChange:e[1]||(e[1]=(...g)=>r.optionSelectChanged&&r.optionSelectChanged(...g))},null,40,We),$(c(u[n.oTitleKey]),1)])),[[I,l.models.searchOption==""||u[n.oTitleKey].toLowerCase().includes(l.models.searchOption.toLowerCase())]])),128))])])}var S=T(Ue,[["render",He],["__scopeId","data-v-3b99e34e"]]);const Je=a("input",{name:"full_name",type:"text",placeholder:"Full Clan Name"},null,-1),ze=a("input",{name:"tag",type:"text",placeholder:"Clan Tag"},null,-1),Fe=a("label",null,[$("Player Limit"),a("input",{name:"player_limit",type:"number",placeholder:"Unlimited",style:{width:"100px"},optional:""})],-1),Ze=a("label",null,[$("Always Require Approval"),a("input",{name:"confirmation_ovrd",type:"checkbox",placeholder:"Confirmation Override"})],-1),Xe={data(){return{available_game_groups:[],extRet:{available_groups:[]}}},methods:{confirmBtnClick(t){C.ajax({url:"/api/clans/newClan",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("new_clan",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log(t),this.available_game_groups=t})}},components:{popup:b,SelectMultiple:S},created(){this.getGameGroups()}},Ye=w(y(h({},Xe),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"New Clan",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[Je,ze,m(S,{elements:e.available_game_groups.sort(),oIdKey:"_id",oTitleKey:"group_name",title:"Available groups",onSelectChanged:n[0]||(n[0]=s=>e.extRet.available_groups=s)},null,8,["elements"]),Fe,Ze]),_:1},8,["onConfirmBtnClick","extRetProp"]))}})),Qe=["value"],xe=["value"],et=$("Player Limit"),tt=["value"],nt=$("Always Require Approval"),st=["checked"],ot={data(){return{available_game_groups:[],discord_roles:[],extRet:{available_groups:[]}}},props:{clan_data:{type:Object,default:{}}},methods:{confirmBtnClick(t){C.ajax({url:"/api/clans/editClan",type:"post",data:JSON.stringify(h({_id:this.clan_data._id},t)),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("clan_edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log(t),this.available_game_groups=t})}},components:{popup:b,SelectMultiple:S},created(){this.getGameGroups(),console.log(this.clan_data)}},at=w(y(h({},ot),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Edit Clan",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[a("input",{name:"full_name",type:"text",placeholder:"Full Clan Name",value:t.clan_data.full_name},null,8,Qe),a("input",{name:"tag",type:"text",placeholder:"Clan Tag",value:t.clan_data.tag},null,8,xe),m(S,{elements:e.available_game_groups.sort(),oIdKey:"_id",oTitleKey:"group_name",title:"Available groups",preselect:t.clan_data.available_groups,onSelectChanged:n[0]||(n[0]=s=>e.extRet.available_groups=s)},null,8,["elements","preselect"]),a("label",null,[et,a("input",{name:"player_limit",type:"number",placeholder:"Unlimited",style:{width:"100px"},value:t.clan_data.player_limit,optional:""},null,8,tt)]),a("label",null,[nt,a("input",{name:"confirmation_ovrd",type:"checkbox",checked:t.clan_data.confirmation_ovrd,placeholder:"Confirmation Override"},null,8,st)])]),_:1},8,["onConfirmBtnClick","extRetProp"]))}})),it=a("input",{name:"group_name",type:"text",placeholder:"Group Name",regex:"^[a-zA-Z\\d]{2,}$"},null,-1),lt=a("label",null,[$("Require Approval"),a("input",{name:"require_appr",type:"checkbox",placeholder:"Require Approval"})],-1),rt={data(){return{permissions:[{id:"balance",name:"Balance"},{id:"ban",name:"Ban"},{id:"cameraman",name:"Cameraman"},{id:"canseeadminchat",name:"Can see Admin Chat"},{id:"changemap",name:"Change Map"},{id:"chat",name:"Chat"},{id:"cheat",name:"Cheat"},{id:"clientdemos",name:"Client Demos"},{id:"config",name:"Config"},{id:"debug",name:"Debug"},{id:"demos",name:"Demos"},{id:"featuretest",name:"Feature Test"},{id:"forceteamchange",name:"Force Team Change"},{id:"immune",name:"Immune"},{id:"kick",name:"Kick"},{id:"manageserver",name:"Manage Server"},{id:"pause",name:"Pause"},{id:"private",name:"Private"},{id:"reserve",name:"Reserve"},{id:"startvote",name:"Start Vote"},{id:"teamchange",name:"Team Change"}],discord_roles:[],extRet:{discord_roles:[],group_permissions:[]}}},methods:{log:console.log,confirmBtnClick(t){console.log(t),C.ajax({url:"/api/gameGroups/write/newGroup",type:"post",dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:e=>{console.log(e),this.$emit("new_game_group",e)},error:e=>{console.error(e),this.$refs.popupComp.blinkAll()}})},getAllDiscordRoles:function(){fetch("/api/discord/read/getRoles").then(t=>t.json()).then(t=>{this.discord_roles=t})}},components:{popup:b,SelectMultiple:S},created(){this.getAllDiscordRoles()}},dt=w(y(h({},rt),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupComp",title:"New Group",onCancelBtnClick:n[2]||(n[2]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[it,m(S,{elements:e.permissions,oIdKey:"id",oTitleKey:"name",title:"Permissions",onSelectChanged:n[0]||(n[0]=s=>e.extRet.group_permissions=s)},null,8,["elements"]),m(S,{elements:e.discord_roles,oIdKey:"id",oTitleKey:"name",title:"Discord Roles",onSelectChanged:n[1]||(n[1]=s=>e.extRet.discord_roles=s)},null,8,["elements"]),lt]),_:1},8,["onConfirmBtnClick","extRetProp"]))}}));const ut={class:"clanCard"},pt={class:"clanName"},ct={class:"clanTag tag"},gt={class:"mainClanContainer"},ft={class:"hoverMenu"},ht={class:"clanCode"},mt={data(){return{clan_data:{}}},props:{clan_data:{required:!0,type:Object}},methods:{deleteClan:function(t){console.log("Removing",this.$props.clan_data),C.ajax({url:"/api/clans/removeClan",type:"post",data:this.$props.clan_data,dataType:"json",success:e=>{console.log(e),t()}})}}},_t=w(y(h({},mt),{setup(t){return(e,n)=>(o(),i("div",ut,[a("div",pt,[a("span",ct,c(t.clan_data.tag),1),m(R(re),{duration:10,paused:!1},{default:v(()=>[$(c(t.clan_data.full_name),1)]),_:1})]),a("div",gt,[a("div",ft,[a("button",{onClick:n[0]||(n[0]=s=>e.$emit("confirm",{clan_data:t.clan_data,callback:e.deleteClan}))},"Delete"),a("button",{onClick:n[1]||(n[1]=s=>e.$emit("edit_clan",{clan_data:t.clan_data}))},"Manage"),a("button",{onClick:n[2]||(n[2]=s=>e.$emit("edit_clan_users",{clan_data:t.clan_data}))},"Managers")])]),a("div",ht,c(t.clan_data.clan_code),1)]))}}));var yt=T(_t,[["__scopeId","data-v-5eb8f67a"]]);const vt={key:0},Ct={data(){return{title:"",text:"",confirmBtnText:"Confirm",confirmBtnShow:!0,rejectBtnText:"Reject",rejectBtnShow:!0,callback:()=>{}}},methods:{setProps:function(t,e){this.title=t,this.text=e},setCallback:function(t=()=>{}){this.callback=t}},components:{popup:b}},bt=w(y(h({},Ct),{setup(t){return(e,n)=>(o(),f(b,{ref:"confirmPopup",title:e.title,onCancelBtnClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.callback},{default:v(()=>[e.text!=""?(o(),i("span",vt,c(e.text),1)):p("",!0)]),_:1},8,["title","onConfirmBtnClick"]))}}));const kt={class:"gameGroupCard"},wt={class:"groupName tag"},$t={class:"tag"},Tt={data(){return{clan_data:{},onHover:!1,hoverMenuLeft:0}},props:{group_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0}},methods:{deleteGroup:function(t){console.log("Removing",this.$props.group_data),C.ajax({url:"/api/gameGroups/write/remove",type:"post",data:this.$props.group_data,dataType:"json",success:e=>{console.log(e),t()}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft}}},St=w(y(h({},Tt),{setup(t){return D(e=>({"0ced75bc":e.hoverMenuLeft+"px"})),(e,n)=>(o(),i("div",kt,[a("div",wt,c(t.group_data.group_name),1),a("div",{class:"mainGroupContainer",onScroll:n[2]||(n[2]=(...s)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...s))},[(o(!0),i(_,null,k(t.group_data.group_permissions,s=>(o(),i("span",$t,c(s),1))),256)),t.hoverMenuVisible?(o(),i("div",{key:0,class:P(["hoverMenu",{vis:e.onHover}])},[a("button",{onClick:n[0]||(n[0]=s=>e.$emit("confirm",{group_data:t.group_data,callback:e.deleteGroup}))},"Delete"),a("button",{onClick:n[1]||(n[1]=s=>e.$emit("edit",{group_data:t.group_data}))},"Edit")],2)):p("",!0)],32)]))}}));var Rt=T(St,[["__scopeId","data-v-2bdb5eeb"]]);const At=["value"],jt=$("Require Approval"),Bt=["checked"],Pt={data(){return{permissions:[{id:"balance",name:"Balance"},{id:"ban",name:"Ban"},{id:"cameraman",name:"Cameraman"},{id:"canseeadminchat",name:"Can see Admin Chat"},{id:"changemap",name:"Change Map"},{id:"chat",name:"Chat"},{id:"cheat",name:"Cheat"},{id:"clientdemos",name:"Client Demos"},{id:"config",name:"Config"},{id:"debug",name:"Debug"},{id:"demos",name:"Demos"},{id:"featuretest",name:"Feature Test"},{id:"forceteamchange",name:"Force Team Change"},{id:"immune",name:"Immune"},{id:"kick",name:"Kick"},{id:"manageserver",name:"Manage Server"},{id:"pause",name:"Pause"},{id:"private",name:"Private"},{id:"reserve",name:"Reserve"},{id:"startvote",name:"Start Vote"},{id:"teamchange",name:"Team Change"}],discord_roles:[],extRet:{discord_roles:[],group_permissions:[]}}},props:{group_data:{type:Object,default:{}}},methods:{confirmBtnClick(t){console.log(t),C.ajax({url:"/api/gameGroups/write/editGroup",type:"post",dataType:"json",data:JSON.stringify(h({_id:this.group_data._id},t)),contentType:"application/json",success:e=>{console.log(e),this.$emit("edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupComp.blinkAll()}})},getAllDiscordRoles:function(){fetch("/api/discord/read/getRoles").then(t=>t.json()).then(t=>{this.discord_roles=t})}},created(){this.getAllDiscordRoles(),console.log(this.group_data)},components:{popup:b,SelectMultiple:S}},Lt=w(y(h({},Pt),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupComp",title:"Edit Group",onCancelBtnClick:n[2]||(n[2]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[a("input",{name:"group_name",type:"text",placeholder:"Group Name",value:t.group_data.group_name,regex:"^[a-zA-Z\\d]{2,}$"},null,8,At),m(S,{elements:e.permissions,oIdKey:"id",oTitleKey:"name",title:"Permissions",preselect:t.group_data.group_permissions,onSelectChanged:n[0]||(n[0]=s=>e.extRet.group_permissions=s)},null,8,["elements","preselect"]),m(S,{elements:e.discord_roles,oIdKey:"id",oTitleKey:"name",title:"Discord Roles",preselect:t.group_data.discord_roles,onSelectChanged:n[1]||(n[1]=s=>e.extRet.discord_roles=s)},null,8,["elements","preselect"]),a("label",null,[jt,a("input",{name:"require_appr",type:"checkbox",placeholder:"Require Approval",checked:t.group_data.require_appr},null,8,Bt)])]),_:1},8,["onConfirmBtnClick","extRetProp"]))}})),Mt={data(){return{clan_users:[],clan_admins:[],extRet:{clan_admins:[]}}},props:{clan_data:{required:!0,type:Object}},methods:{confirmBtnClick(t){console.log("Setting admins:",t),C.ajax({url:"/api/clans/editClanAdmins",type:"post",data:JSON.stringify(h({_id:this.clan_data._id},t)),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("clan_users_edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getClanUsers:function(){C.ajax({url:"/api/clans/getClanUsers",type:"get",data:this.clan_data,dataType:"json",success:t=>{this.clan_users=t},error:t=>{console.error(t),this.$refs.popupLogin.blinkAll()}})},getClanAdmins:function(){C.ajax({url:"/api/clans/getClanAdmins",type:"get",data:this.clan_data,dataType:"json",success:t=>{this.clan_admins=t},error:t=>{console.error("clan admins",t),this.$refs.popupLogin.blinkAll()}})}},components:{popup:b,SelectMultiple:S},created(){console.log("clan_data",this.clan_data),console.log("clan_admins",this.clan_admins),this.getClanUsers(),this.getClanAdmins()}},It=w(y(h({},Mt),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Clan Managers",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[m(S,{elements:e.clan_users.sort(),oIdKey:"_id",oTitleKey:"username",title:"Registered Clan Members",preselect:e.clan_admins,onSelectChanged:n[0]||(n[0]=s=>e.extRet.clan_admins=s)},null,8,["elements","preselect"])]),_:1},8,["onConfirmBtnClick","extRetProp"]))}}));var W="/assets/manage_accounts.1f21cdce.svg";const Gt={class:"gameGroupCard shadow"},Nt={class:"groupName tag"},Dt={key:0,class:"tag"},qt={class:"tag noBg redTrans",style:{color:"#ddd !important"}},Ut=["href"],Kt={key:1,class:"tag noBg redTrans"},Ot={key:2,class:"tag"},Et=["src"],Vt={key:3,class:"tag"},Wt={data(){return{onHover:!1,hoverMenuLeft:0,expirationTime:"",upd_int:-1}},props:{wl_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0},extraTags:{required:!1,default:[]}},methods:{deleteRecord:function(t,e=!1){console.log("Removing",this.$props.wl_data),C.ajax({url:"/api/whitelist/write/removePlayer",type:"post",data:this.$props.wl_data,dataType:"json",success:n=>{console.log(n),t&&t(),e||this.$emit("removedPlayer",this.$props.wl_data)}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft},getHoursLeft:function(t=5){let e="00",n="00",s="00";const l=new Date(this.wl_data.expiration),r=new Date;if(l-r>0){const u=Math.floor((l-r)/1e3/60/60),g=Math.round(u/24),A=Math.round(g/30);if(u<24){const d=Math.floor((l-r)/1e3/60-u*60),L=Math.floor((l-r)/1e3-u*60*60-d*60);return e=(u<10?"0":"")+u,n=(d<10?"0":"")+d,s=(L<10?"0":"")+L,u<0&&(e="00"),d<0&&(n="00"),L<0&&(s="00"),console.log("Expiration",this.wl_data.username,this.wl_data.expiration,u,d,L,e,n,s),e+":"+n+":"+s}else return A<=0?g+" days":A+" months"}return""},startIntervalExpirTimeouts:function(t=5){this.expirationTime=this.getHoursLeft(t),this.upd_int=setInterval(()=>{this.expirationTime=this.getHoursLeft(t)},t*1e3)}},created:function(){this.startIntervalExpirTimeouts(1)},unmounted:function(){clearInterval(this.upd_int)}},Ht=w(y(h({},Wt),{setup(t){return D(e=>({"381e46cc":e.hoverMenuLeft+"px"})),(e,n)=>{var s,l,r;return o(),i("div",Gt,[a("span",{class:P(["dot",{fill:t.wl_data.approved}])},null,2),a("div",Nt,c(t.wl_data.username),1),a("div",{class:"mainGroupContainer",onScroll:n[1]||(n[1]=(...u)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...u))},[t.wl_data.group_full_data?(o(),i("span",Dt,c(t.wl_data.group_full_data[0].group_name),1)):p("",!0),a("span",qt,[a("a",{target:"__blank",href:"https://steamcommunity.com/profiles/"+t.wl_data.steamid64},c(t.wl_data.steamid64),9,Ut)]),t.wl_data.discord_username||t.wl_data.serverData&&t.wl_data.serverData[0]&&((s=t.wl_data.serverData[0])==null?void 0:s.discord_username)?(o(),i("span",Kt,c("@"+(t.wl_data.serverData&&t.wl_data.serverData[0]&&((l=t.wl_data.serverData[0])==null?void 0:l.discord_username)?(r=t.wl_data.serverData[0])==null?void 0:r.discord_username:t.wl_data.discord_username).replace(/^\@/,"")),1)):p("",!0),t.wl_data.inserted_by?(o(),i("span",Ot,[a("img",{src:R(W)},null,8,Et),$(c(t.wl_data.inserted_by[0].username),1)])):p("",!0),t.wl_data.expiration?(o(),i("span",Vt,c(e.expirationTime),1)):p("",!0),(o(!0),i(_,null,k(t.extraTags,u=>(o(),i("span",{class:"tag",key:u},c(u),1))),128)),t.hoverMenuVisible?(o(),i("div",{key:4,class:P(["hoverMenu",{vis:e.onHover}])},[a("button",{onClick:n[0]||(n[0]=u=>e.$emit("confirm",{wl_data:t.wl_data,callback:e.deleteRecord}))},"Delete")],2)):p("",!0)],32)])}}}));var H=T(Ht,[["__scopeId","data-v-1abd2636"]]),X="/assets/open-new-tab.080e49d5.svg",Q="/assets/bin.973d0da4.svg",Jt="/assets/edit_pen.8e0f4645.svg";const zt={class:"selectorContainer"},Ft=["disabled"],Zt=["value","selected"],Xt=["src"],Yt=["src"],Qt=["src"],xt={class:"selectorContainer"},en=["disabled"],tn=["value","selected"],nn=["src"],sn={class:"playerCounter"},on={data(){return{models:{searchPlayer:""},whitelist_clans:[],sel_clan:{},sel_clan_obj:{},wl_players:[],editor:!1,editor_lists:!1,record_refs:[],lists:[],sel_list_id:null,sel_list_obj:{}}},props:{user_session:{required:!0,default:{}}},methods:{log:console.log,getWhitelistTabClans:function(t){fetch("/api/whitelist/read/getAllClans").then(e=>e.json()).then(e=>{this.whitelist_clans=e,console.log("All clans:",e),t&&t()})},selectClanChanged:function(t,e=!1){this.record_refs=[],this.sel_clan=e?t:t.target.value,this.getClanWhitelist()},selectListChanged:function(t,e=!1){this.record_refs=[],this.sel_list_id=t.target.value,this.sel_list_obj=this.lists.filter(n=>n._id==this.sel_list_id)[0],this.getClanWhitelist()},getElmByName(t){return this.$el.querySelector('input[name="'+t+'"]')},getClanWhitelist(){this.sel_clan_obj=this.whitelist_clans.filter(t=>t._id==this.sel_clan)[0],console.log("Sel clan",this.sel_clan,this.sel_clan_obj),C.ajax({url:"/api/whitelist/read/getAll",type:"get",data:{sel_list_id:this.sel_list_id,sel_clan_id:this.sel_clan},dataType:"json",contentType:"application/json",success:t=>{console.log("Whitelist player",t),this.wl_players=t},error:t=>{console.error(t)}})},getLists:function(t=null,e=!1){C.ajax({url:"/api/lists/read/getAll",type:"get",dataType:"json",success:n=>{console.log("Lists",n),this.lists=n,this.record_refs=[],this.sel_list_obj=e?n[n.length-1]:n[0],this.sel_list_id=this.sel_list_obj._id;const s=this.user_session.clan_code?this.whitelist_clans.filter(l=>l.clan_code==this.user_session.clan_code)[0]._id:this.whitelist_clans[0]._id;this.selectClanChanged(s,!0),t&&t()},error:n=>{console.error(n)}})},checkPerms:function(t=null){fetch("/api/whitelist/write/checkPerm").then(e=>e.json()).then(e=>{console.log("editor?",e),this.editor=!0,t&&t()})},checkPermsLists:function(t=null){fetch("/api/lists/write/checkPerm").then(e=>e.json()).then(e=>{console.log("editor lists?",e),this.editor_lists=!0,t&&t()})},removePlayer:function(t){this.wl_players=this.wl_players.filter(e=>e._id!=t._id)},appendPlayer:function(t){this.wl_players.push(t)},removeAllPlayers:function(){let e=0;for(let n of this.wl_players)setTimeout(()=>{this.removePlayer(n)},50*e++)},clearAllList:function(t){C.ajax({url:"/api/whitelist/write/clearList",type:"post",data:JSON.stringify({sel_list_id:this.sel_list_id,sel_clan_id:this.sel_clan}),dataType:"json",contentType:"application/json",success:e=>{this.wl_players=[]},error:e=>{console.error(e)}})},deleteList:function(t){C.ajax({url:"/api/lists/write/deleteList",type:"post",data:JSON.stringify({sel_list_id:this.sel_list_id}),dataType:"json",contentType:"application/json",success:e=>{this.getLists(this.getWhitelistTabClans),t&&t.closePopup&&t.closePopup()},error:e=>{console.error(e)}})},newListCreated:function(){this.getLists(this.getWhitelistTabClans,!0)},openNewTab:function(t){window.open(t,"_blank")},openListOutput:function(){this.openNewTab(window.location.origin+"/"+this.lists.filter(t=>t._id==this.sel_list_id)[0].output_path)},openClanOutput:function(){this.openNewTab(window.location.origin+"/"+this.lists.filter(t=>t._id==this.sel_list_id)[0].output_path+"/"+this.sel_clan_obj.clan_code)},listEdited:function(){this.getLists(this.getWhitelistTabClans)}},created(){this.checkPerms(),this.checkPermsLists(),this.getWhitelistTabClans(this.getLists)},components:{whitelistUserCard:H}},an=w(y(h({},on),{setup(t){return(e,n)=>{var s,l;return o(),i(_,null,[a("div",zt,[a("select",{name:"list_selector",disabled:e.lists.length<=1,onChange:n[0]||(n[0]=(...r)=>e.selectListChanged&&e.selectListChanged(...r))},[(o(!0),i(_,null,k(e.lists,r=>(o(),i("option",{value:r._id,selected:e.sel_list_id==r._id},c(r.title),9,Zt))),256))],40,Ft),e.editor_lists?(o(),i("button",{key:0,style:{"font-size":"25px"},onClick:n[1]||(n[1]=r=>e.$emit("addNewList",{callback:e.newListCreated}))},"+")):p("",!0),e.editor_lists?(o(),i("button",{key:1,style:{padding:"10px"},onClick:n[2]||(n[2]=r=>e.$emit("editList",{list_obj:e.sel_list_obj,callback:e.listEdited}))},[a("img",{src:R(Jt)},null,8,Xt)])):p("",!0),e.editor_lists?(o(),i("button",{key:2,style:{padding:"10px"},onClick:n[3]||(n[3]=(...r)=>e.openListOutput&&e.openListOutput(...r))},[a("img",{src:R(X)},null,8,Yt)])):p("",!0),e.editor_lists?(o(),i("button",{key:3,style:{padding:"10px"},onClick:n[4]||(n[4]=r=>e.$emit("confirm_standard",{title:"Confirm list deletion?",text:`Do you really want to delete list ${e.sel_list_obj.title}?`,callback:e.deleteList}))},[a("img",{src:R(Q)},null,8,Qt)])):p("",!0)]),a("div",xt,[a("select",{name:"clan_selector",disabled:e.whitelist_clans.length<=1,onChange:n[5]||(n[5]=(...r)=>e.selectClanChanged&&e.selectClanChanged(...r))},[(o(!0),i(_,null,k(e.whitelist_clans,r=>(o(),i("option",{value:r._id,selected:t.user_session&&t.user_session.clan_code&&t.user_session.clan_code==r.clan_code},c(r.full_name),9,tn))),256))],40,en),e.editor?(o(),i("button",{key:0,onClick:n[6]||(n[6]=r=>e.$emit("import_whitelist",{sel_list_id:e.sel_list_id,sel_clan:e.sel_clan,callback:e.appendPlayer}))},"Import")):p("",!0),e.editor?(o(),i("button",{key:1,onClick:n[7]||(n[7]=r=>e.$emit("confirm_clearing",{callback:e.clearAllList}))},"Clear")):p("",!0),e.editor?(o(),i("button",{key:2,style:{padding:"10px"},onClick:n[8]||(n[8]=(...r)=>e.openClanOutput&&e.openClanOutput(...r))},[a("img",{src:R(X)},null,8,nn)])):p("",!0),a("span",sn,c(e.wl_players.length)+"/ "+c(((s=e.sel_clan_obj)==null?void 0:s.player_limit)&&((l=e.sel_clan_obj)==null?void 0:l.player_limit)!=""?e.sel_clan_obj.player_limit:"\u221E"),1)]),M(a("input",{type:"search",placeholder:"Search Player",name:"plrSearch","onUpdate:modelValue":n[9]||(n[9]=r=>e.models.searchPlayer=r)},null,512),[[N,e.models.searchPlayer]]),e.editor?(o(),i("button",{key:0,class:"addHorizontal",onClick:n[10]||(n[10]=r=>e.$emit("addNewWhitelistUser",{sel_list_id:e.sel_list_id,sel_clan:e.sel_clan,callback:e.appendPlayer}))})):p("",!0),(o(!0),i(_,null,k(e.wl_players,r=>M((o(),f(H,{ref_for:!0,ref:u=>{e.record_refs.push(u)},wl_data:r,hoverMenuVisible:e.editor,onConfirm:n[11]||(n[11]=u=>e.$emit("confirm",u)),onRemovedPlayer:e.removePlayer},null,8,["wl_data","hoverMenuVisible","onRemovedPlayer"])),[[I,r.username.toLowerCase().startsWith(e.models.searchPlayer.toLowerCase())||R(K)(r.username.toLowerCase(),e.models.searchPlayer.toLowerCase())<=2||e.models.searchPlayer==""]])),256))],64)}}}));var ln=T(an,[["__scopeId","data-v-3c8fd53e"]]);const rn={props:{text:{required:!0,type:String},name:{required:!0,type:String},type:{type:String,default:"text"},value:{default:""},placeholder:{type:String,default:null},oIdKey:{required:!1,type:String,default:null},oTitleKey:{required:!1,type:String,default:""},options:{default:[]},optionPreselect:{required:!1,default:null},inputHidden:{required:!1,default:!1},selectHidden:{required:!1,default:!1},optional:{required:!1,default:!1},readonly:{required:!1,default:!1},min:{required:!1,type:Number},max:{required:!1,type:Number},regex:{required:!1,type:RegExp}},data(){return{valRet:"",optRet:{}}},methods:{log:console.log,optionUpdate:function(t){console.log(t),this.optRet=t.target.value,this.emitUpdate()},valueUpdate:function(t){console.log(t),this.valRet=t.target.value,this.emitUpdate()},emitUpdate:function(){const t={value:this.valRet,option:this.optRet};console.log(this.text,"emitting update",t),this.$emit("valueChanged",t)},preselectProcedure:function(){try{this.optRet=this.oIdKey&&this.options[0]&&this.options[0][this.oIdKey]?this.options.find(t=>t[this.oIdKey]==this.optionPreselect)[this.oIdKey]:this.options.find(t=>t==this.optionPreselect)}catch{}this.valRet=this.value,this.emitUpdate()}},created(){this.preselectProcedure()},updated(){this.preselectProcedure()}},dn=t=>(q("data-v-d4983c74"),t=t(),U(),t),un=["type","value","placeholder","optional","readonly","min","max","regex"],pn=dn(()=>a("option",{value:"0",selected:"",hidden:""},"Select",-1)),cn=["value","selected"];function gn(t,e,n,s,l,r){var u;return o(),i("label",{class:P({selectVisible:n.options.length>0})},[$(c(n.text)+" ",1),n.inputHidden?p("",!0):(o(),i("input",{key:0,type:n.type,value:n.value,placeholder:n.placeholder,onChange:e[0]||(e[0]=(...g)=>r.valueUpdate&&r.valueUpdate(...g)),optional:n.optional,readonly:n.readonly,min:n.min,max:n.max,regex:(u=n.regex)==null?void 0:u.toString().replace(/^\//,"").replace(/\/$/,"")},null,40,un)),!n.selectHidden&&n.options.length>0?(o(),i("select",{key:1,onChange:e[1]||(e[1]=(...g)=>r.optionUpdate&&r.optionUpdate(...g))},[pn,(o(!0),i(_,null,k(n.options,g=>(o(),i("option",{key:g[n.oIdKey],value:n.oIdKey&&g[n.oIdKey]?g[n.oIdKey]:g,selected:(n.oIdKey&&g[n.oIdKey]?g[n.oIdKey]:g)==l.optRet},c(n.oTitleKey&&g[n.oTitleKey]?g[n.oTitleKey]:g),9,cn))),128))],32)):p("",!0)],2)}var B=T(rn,[["render",gn],["__scopeId","data-v-d4983c74"]]);const fn=a("input",{name:"username",type:"text",placeholder:"Username"},null,-1),hn=a("input",{name:"steamid64",type:"text",regex:"^\\d{17}$",placeholder:"SteamID64"},null,-1),mn={name:"group"},_n=a("option",{hidden:"",selected:"",value:""},"Select a group",-1),yn=["value"],vn=a("input",{name:"discordUsername",type:"text",placeholder:"Discord Username",optional:"",regex:"^.{1,32}#[0-9]{4}$"},null,-1),Cn={data(){return{game_groups:[],extRet:{durationHours:null}}},props:{add_data:{required:!0,type:Object}},methods:{confBtnClick:function(t){t.sel_clan_id=this.add_data.sel_clan,t.sel_list_id=this.add_data.sel_list_id;const e=this.$refs.popupLogin;C.ajax({url:"/api/whitelist/write/addPlayer",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:6e4,success:n=>{if(n.status=="inserted_new_player"){const s=y(h({},n.player),{group_full_data:this.game_groups.filter(l=>l._id==n.player.id_group)});console.log(s),this.add_data.callback(s),this.$emit("cancelBtnClick")}else console.error(n),e.blinkAll()},error:n=>{console.error(n),e.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{this.game_groups=t,console.log("game groups",this.game_groups)})}},created(){console.log("Adding new whitelist user for",this.add_data.sel_clan,"clan",this.add_data),this.getGameGroups()},components:{popup:b}},bn=w(y(h({},Cn),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Add Player",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confBtnClick,"hide-cancel":!1,extRetProp:e.extRet},{default:v(()=>[fn,hn,a("select",mn,[_n,(o(!0),i(_,null,k(e.game_groups,s=>(o(),i("option",{value:s._id,key:s},c(s.group_name),9,yn))),128))]),m(B,{style:{margin:"5px 0",height:"30px"},text:"Duration",name:"durationHoursAdv",type:"number",regex:/^(?!-)/,placeholder:"Unlimited",oTitleKey:"title",oIdKey:"value",options:[{title:"Hours",value:1},{title:"Days",value:24},{title:"Weeks",value:7*24},{title:"Months",value:30*24}],onValueChanged:n[0]||(n[0]=s=>e.extRet.durationHours=+s.value*s.option),optional:""},null,8,["regex"]),vn]),_:1},8,["onConfirmBtnClick","extRetProp"]))}}));const kn={class:"thanksCard"},wn=["src","alt"],$n={class:"desc"},Tn=["href"],Sn=["href"],Rn=["href"],An={props:{title:{required:!0,type:String},website:{required:!1,type:String},discord:{required:!1,type:String},github:{required:!1,type:String},src:{required:!0,type:String}},methods:{getSrc:function(){return require(this.src)}}},jn=w(y(h({},An),{setup(t){return(e,n)=>(o(),i("div",kn,[a("img",{src:t.src,alt:t.title},null,8,wn),a("div",$n,[a("h3",null,c(t.title),1),a("p",null,[t.website?(o(),i("a",{key:0,href:t.website,target:"_blank"},"Official Website",8,Tn)):p("",!0),t.discord?(o(),i("a",{key:1,href:t.discord,target:"_blank"},"Official Discord",8,Sn)):p("",!0),t.github?(o(),i("a",{key:2,href:t.github,target:"_blank"},"GitHub Repo",8,Rn)):p("",!0)])])]))}}));var O=T(jn,[["__scopeId","data-v-4773be30"]]);const Bn={class:"gameGroupCard shadow"},Pn={class:"groupName tag"},Ln={class:"tag"},Mn={class:"tag noBg redTrans"},In={key:0,class:"tag noBg redTrans"},Gn={class:"tag"},Nn=["src"],Dn={class:"align-self: flex-end;"},qn={data(){return{onHover:!1,hoverMenuLeft:0}},props:{wl_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0}},methods:{setApprovalStatus:function(t,e){console.log("Removing",this.$props.wl_data),C.ajax({url:"/api/approval/write/setApprovedStatus",type:"post",data:h({approve_update:t},this.$props.wl_data),dataType:"json",success:n=>{console.log(n),e&&e(),this.$emit("removedPlayer",this.$props.wl_data)}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft},rejectApproval:function(){this.setApprovalStatus(!1,()=>{})},approveApproval:function(){this.setApprovalStatus(!0,()=>{})}},created(){console.log("wl_data",this.wl_data)}},Un=w(y(h({},qn),{setup(t){return D(e=>({"658d2612":e.hoverMenuLeft+"px"})),(e,n)=>(o(),i("div",Bn,[a("span",{class:P(["dot",{fill:t.wl_data.approved}])},null,2),a("div",Pn,c(t.wl_data.username),1),a("div",{class:"mainGroupContainer",onScroll:n[2]||(n[2]=(...s)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...s))},[a("span",Ln,c(t.wl_data.group_full_data[0].group_name),1),a("span",Mn,c(t.wl_data.steamid64),1),t.wl_data.discord_username!=""?(o(),i("span",In,c(t.wl_data.discord_username),1)):p("",!0),a("span",Gn,[a("img",{src:R(W)},null,8,Nn),$(c(t.wl_data.inserted_by[0].username),1)]),a("div",Dn,[a("button",{onClick:n[0]||(n[0]=(...s)=>e.rejectApproval&&e.rejectApproval(...s))},"Reject"),a("button",{onClick:n[1]||(n[1]=(...s)=>e.approveApproval&&e.approveApproval(...s))},"Approve")])],32)]))}}));var Kn=T(Un,[["__scopeId","data-v-ec35c268"]]);const On={data(){return{whitelist_clans:[],sel_clan:{},wl_approvals:[],editor:!1}},methods:{log:console.log,getWhitelistTabClans:function(){fetch("/api/whitelist/read/getPendingApprovalClans").then(t=>t.json()).then(t=>{this.whitelist_clans=t,console.log("Pending approval clans:",t),this.sel_clan=this.whitelist_clans[0]._id,this.getClanWhitelist()})},selectClanChanged:function(t){this.sel_clan=t.target.value,this.getClanWhitelist()},getClanWhitelist(){C.ajax({url:"/api/whitelist/read/getPendingApproval",type:"get",data:{sel_clan_id:this.sel_clan},dataType:"json",contentType:"application/json",success:t=>{this.wl_approvals=t},error:t=>{console.error(t)}})},checkPerms:function(){fetch("/api/whitelist/write/checkPerm").then(t=>t.json()).then(t=>{console.log("editor?",t),this.editor=!0})},removePlayer:function(t){console.log("removing player",t,this.wl_approvals);for(let e of this.wl_approvals)e.wl_data=e.wl_data.filter(n=>n._id!=t._id);this.wl_approvals=this.wl_approvals.filter(e=>e.wl_data.length>0)},appendPlayer:function(t){this.wl_approvals.push(t)}},created(){this.getWhitelistTabClans()},components:{approveUserCard:Kn}},En=["disabled"],Vn=["value"],Wn={key:0},Hn={class:"shadow"};function Jn(t,e,n,s,l,r){const u=Y("approveUserCard");return o(),i(_,null,[a("select",{name:"clan_selector",ref:"clan_selector",disabled:l.whitelist_clans.length<=1,class:P({grayout:l.whitelist_clans.length==0}),onChange:e[0]||(e[0]=(...g)=>r.selectClanChanged&&r.selectClanChanged(...g))},[(o(!0),i(_,null,k(l.whitelist_clans,g=>(o(),i("option",{value:g._id},c(g.full_name),9,Vn))),256)),l.whitelist_clans.length==0?(o(),i("option",Wn,"Nothing to do here")):p("",!0)],42,En),(o(!0),i(_,null,k(l.wl_approvals,g=>(o(),i("div",Hn,[a("h3",null,c(g.title),1),(o(!0),i(_,null,k(g.wl_data,A=>(o(),f(u,{wl_data:A,hoverMenuVisible:l.editor,onConfirm:e[1]||(e[1]=d=>t.$emit("confirm",d)),onRemovedPlayer:r.removePlayer},null,8,["wl_data","hoverMenuVisible","onRemovedPlayer"]))),256))]))),256))],64)}var zn=T(On,[["render",Jn],["__scopeId","data-v-7ba33dc4"]]);const Fn={style:{"flex-grow":"1",display:"flex","flex-direction":"column",width:"100%"}},Zn={class:"rowBtnContainer"},Xn=$("Replace"),Yn=$("With"),Qn={class:"rowBtnContainer"},xn={key:0},es={class:"tag"},ts=["name"],ns=["value","selected"],ss={key:1,class:"overflow"},os=["name","value"],as={class:"tag"},is={class:"tag"},ls={key:0,class:"tag"},rs={data(){return{importSteps:[{title:"Loading List",confBtnText:"Next"},{title:"Setup Groups",confBtnText:"Next"},{title:"Player Names",confBtnText:"Import"}],currentStep:0,importFoundGroups:[],parListImport:[],game_groups:[],conv_gameGroups:{},player_name_conv:{},refs:{textarea:null,replace:{from:null,with:null}}}},props:{add_data:{required:!0,type:Object}},methods:{confirmBtnClick:async function(t){if(this.currentStep==0){const e=this.$el.querySelector("textarea").value.split(`
`).filter(s=>s!=""&&s.startsWith("Admin")),n=/^Admin=(?<steamid>\d{17}):(?<group>.[a-zA-Z_\d]{1,})((\s\/{2}\s?)(?<comment>.{1,}))?/gm;e.forEach((s,l)=>{const r=s;let g=this.regexExec(r,n).groups;g.discordUsername=this.getDiscord(g.comment),this.parListImport.push(g),this.importFoundGroups.includes(g.group)||this.importFoundGroups.push(g.group)}),this.parListImport=this.parListImport.filter(s=>s!=null),console.log("List Import",this.parListImport)}else if(this.currentStep==1){for(let e of this.importFoundGroups)this.conv_gameGroups[e]=t["sel-"+e];console.log(this.conv_gameGroups)}else this.currentStep==2&&(console.log(t),this.player_name_conv=t);if(this.currentStep+1<this.importSteps.length)this.currentStep++;else for(let e of this.parListImport){const n={username:this.player_name_conv[e.steamid],steamid64:e.steamid,discordUsername:e.discordUsername,group:this.conv_gameGroups[e.group],sel_clan_id:this.add_data.sel_clan,sel_list_id:this.add_data.sel_list_id};console.log("Importing whitelist",n),await this.requestAddToWhitelist(n)}},requestAddToWhitelist:function(t){return C.ajax({url:"/api/whitelist/write/addPlayer",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:6e4,success:e=>{if(e.status=="inserted_new_player"){const n=y(h({},e.player),{group_full_data:this.game_groups.filter(s=>s._id==e.player.id_group)});console.log(n),this.add_data.callback(n),this.$emit("cancelBtnClick")}else console.error(e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$emit("cancelBtnClick")}})},regexExec:function(t,e){if(t.match(e)){const n=e.exec(t);if(n==null)this.regexExec(t,e);else return n}else return null},getGameGroups:function(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log("Game Groups",t),this.game_groups=t})},replaceTextArea:function(){console.log(this.refs);const t=this.refs.replace.from.value.replace(/\[/g,"\\[").replace(/\]/g,"\\]");let e=RegExp(`${t}`,"g");this.refs.textarea.value=this.refs.textarea.value.replace(e,this.refs.replace.with.value)},removeTags:function(){this.refs.textarea.value=this.refs.textarea.value.replace(/\[[^\[\]]{1,}\] */g,"")},getDiscord:function(t){const e=t.match(/\@.{3,32}(#(0{1}|\d{4}))/);return e?e[0]:""},preventDefault(t){t.preventDefault()}},created(){this.getGameGroups()},components:{popup:b}},ds=w(y(h({},rs),{setup(t){return(e,n)=>(o(),f(b,{id:"popup",focus:e.refs.textarea,class:P({big:e.currentStep==0}),ref:"popupComp",title:"Import List",confirmText:e.importSteps[e.currentStep].confBtnText,onCancelBtnClick:n[2]||(n[2]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick},{default:v(()=>[a("h3",null,c(e.importSteps[e.currentStep].title),1),M(a("div",Fn,[a("textarea",{ref:s=>e.refs.textarea=s,style:{"flex-grow":"1"},placeholder:"Paste here your whitelist"},null,512),a("div",Zn,[a("label",null,[Xn,a("input",{ref:s=>e.refs.replace.from=s,type:"text",placeholder:"Replace",optional:""},null,512)]),a("label",null,[Yn,a("input",{ref:s=>e.refs.replace.with=s,type:"text",placeholder:"With",optional:""},null,512),a("button",{onClick:n[0]||(n[0]=(...s)=>e.replaceTextArea&&e.replaceTextArea(...s))},"Replace")])]),a("div",Qn,[a("button",{onClick:n[1]||(n[1]=(...s)=>e.removeTags&&e.removeTags(...s))},"Remove Tags")])],512),[[I,e.currentStep==0]]),e.currentStep==1?(o(),i("div",xn,[(o(!0),i(_,null,k(e.importFoundGroups,s=>(o(),i("div",{key:s,class:"grTranslation"},[a("span",es,c(s),1),a("select",{name:"sel-"+s},[(o(!0),i(_,null,k(e.game_groups,l=>(o(),i("option",{key:l,value:l._id,selected:l.group_name.toLowerCase()==s.toLowerCase()},c(l.group_name),9,ns))),128))],8,ts)]))),128))])):p("",!0),e.currentStep==2?(o(),i("div",ss,[(o(!0),i(_,null,k(e.parListImport,s=>(o(),i("div",{class:"grTranslation",key:s.steamid},[a("input",{name:s.steamid,type:"text",value:s.comment.replace(/\@.{3,32}(#(0{1}|\d{4}))/,"")},null,8,os),a("span",as,c(e.game_groups.filter(l=>l._id==e.conv_gameGroups[s.group])[0].group_name),1),a("span",is,c(s.steamid),1),s.discordUsername!=""?(o(),i("span",ls,c(s.discordUsername),1)):p("",!0)]))),128))])):p("",!0)]),_:1},8,["focus","class","confirmText","onConfirmBtnClick"]))}}));var us=T(ds,[["__scopeId","data-v-00c8f95c"]]),ps="/assets/crown.b0c7a88a.svg";const cs={class:"gameGroupCard shadow"},gs={class:"groupName tag"},fs={class:"mainContainer"},hs={key:0,class:"tag"},ms=["src"],_s=["disabled"],ys=["value","selected","hidden"],vs=["disabled"],Cs=["src"],bs={data(){return{refs:{roleSel:{}}}},props:{user_data:{required:!0,type:Object},roles:{required:!0,type:Object}},methods:{deleteRecord:function(t,e=!1){console.log("Removing",this.$props.user_data),C.ajax({url:"/api/users/write/remove",type:"post",data:this.$props.user_data,dataType:"json",success:n=>{console.log(n),t&&t(),n.modifiedCount>0&&(e||this.$emit("removedUser",this.$props.user_data))}})},updateAccessLevel:function(t,e=!1){console.log("updating",this.$props.user_data),C.ajax({url:"/api/users/write/updateAccessLevel",type:"post",data:h({upd:this.refs.roleSel.value},this.user_data),dataType:"json",success:n=>{console.log(n),n.modifiedCount>0?this.rawBlink(this.refs.roleSel,"#252"):this.rawBlink(this.refs.roleSel,"#a229")}})},rawBlink:function(t,e){t.style.backgroundColor=e,setTimeout(()=>{t.style.backgroundColor=""},2e3)}}},ks=w(y(h({},bs),{setup(t){return(e,n)=>(o(),i("div",cs,[a("div",gs,c(t.user_data.username),1),a("div",fs,[t.user_data.clan_data&&t.user_data.clan_data.length>0?(o(),i("span",hs,[t.user_data.clan_data[0].admins&&t.user_data.clan_data[0].admins.length>0&&t.user_data.clan_data[0]&&t.user_data.clan_data[0].admins.includes(t.user_data._id)?(o(),i("img",{key:0,src:R(ps),alt:""},null,8,ms)):p("",!0),$(c(t.user_data.clan_data[0]?t.user_data.clan_data[0].tag:""),1)])):p("",!0),a("select",{disabled:t.user_data.access_level==0,ref:s=>{e.refs.roleSel=s},name:"roleSel",onChange:n[0]||(n[0]=(...s)=>e.updateAccessLevel&&e.updateAccessLevel(...s))},[(o(!0),i(_,null,k(t.roles,s=>(o(),i("option",{value:s.access_level,selected:t.user_data.access_level==s.access_level,hidden:s.access_level==0},c(s.name),9,ys))),256))],40,_s),a("button",{disabled:t.user_data.access_level==0,class:"redBG round",onClick:n[1]||(n[1]=s=>e.$emit("deleteRecord",{_id:t.user_data._id,username:t.user_data.username,callback:e.deleteRecord}))},[a("img",{src:R(Q)},null,8,Cs)],8,vs)])]))}}));var ws=T(ks,[["__scopeId","data-v-3f8e4338"]]);const $s=a("input",{name:"old_password",type:"password",placeholder:"Old Password"},null,-1),Ts=a("input",{name:"new_password",type:"password",placeholder:"New Password"},null,-1),Ss=a("input",{name:"conf_password",type:"password",placeholder:"Confirm New Password"},null,-1),Rs={data(){return{refs:{popupLogin:null}}},methods:{confBtnClick(t){const e=this.$refs.popupLogin;t.new_password==t.conf_password?(console.log("attempting to change password",t),C.ajax({url:"/api/changepassword",type:"post",data:t,dataType:"json",success:n=>{console.log(n),e.blinkAll("#252"),setTimeout(()=>{this.$emit("cancelBtnClick")},500)},error:n=>{console.error(n),e.blinkAll()}})):(e.blinkName("new_password"),e.blinkName("conf_password"))}},components:{popup:b}},As=w(y(h({},Rs),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Change Password",onCancelBtnClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confBtnClick,"hide-cancel":!1},{default:v(()=>[$s,Ts,Ss]),_:1},8,["onConfirmBtnClick"]))}})),js=a("input",{name:"title",type:"text",placeholder:"Title"},null,-1),Bs=a("input",{name:"output_path",type:"text",placeholder:"Output Path",regex:"^[a-zA-Z\\d]{2,}$"},null,-1),Ps=a("label",null,[$("Hidden to managers"),a("input",{name:"hidden_managers",type:"checkbox",placeholder:"Hidden to managers"})],-1),Ls=a("label",null,[$("Require Approval"),a("input",{name:"require_appr",type:"checkbox",placeholder:"Require Approval"})],-1),Ms={data(){return{discord_roles:[],extRet:{discord_roles:[]}}},props:{add_data:{required:!0,type:Object}},methods:{confirmBtnClick:function(t){t.sel_clan_id=this.add_data.sel_clan,t.sel_list_id=this.add_data.sel_list_id;const e=this.$refs.popupLogin;C.ajax({url:"/api/lists/write/addNewList",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:6e4,success:n=>{n.status=="inserted_new_list"?(this.add_data.callback(),this.$emit("cancelBtnClick")):(console.error(n),e.blinkAll())},error:n=>{console.error(n),e.blinkAll()}})},getAllDiscordRoles:function(){fetch("/api/discord/read/getRoles").then(t=>t.json()).then(t=>{this.discord_roles=t})}},components:{popup:b,SelectMultiple:S},created(){this.getAllDiscordRoles()}},Is=w(y(h({},Ms),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"New List",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[js,Bs,m(S,{elements:e.discord_roles,oIdKey:"id",oTitleKey:"name",title:"Discord Roles",preselect:e.discord_roles,onSelectChanged:n[0]||(n[0]=s=>e.extRet.discord_roles=s)},null,8,["elements","preselect"]),Ps,Ls]),_:1},8,["onConfirmBtnClick","extRetProp"]))}})),Gs=["value"],Ns=["value"],Ds=$("Hidden to managers"),qs=["checked"],Us=$("Require Approval"),Ks=["checked"],Os={data(){return{discord_roles:[],extRet:{discord_roles:[]}}},props:{data:{required:!0,type:Object}},methods:{confirmBtnClick:function(t){t.sel_list_id=this.data.list_obj._id,console.log(t);const e=this.$refs.popupLogin;C.ajax({url:"/api/lists/write/editList",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:6e4,success:n=>{n.status=="edited_list"?(console.log(n),this.data.callback(),this.$emit("cancelBtnClick")):(console.error(n),e.blinkAll())},error:n=>{console.error(n),e.blinkAll()}})},getAllDiscordRoles:function(){fetch("/api/discord/read/getRoles").then(t=>t.json()).then(t=>{this.discord_roles=t})}},components:{popup:b,SelectMultiple:S},created(){this.getAllDiscordRoles(),console.log("Editing list",this.data)}},Es=w(y(h({},Os),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"Edit List",onCancelBtnClick:n[1]||(n[1]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[a("input",{name:"title",type:"text",placeholder:"Title",value:t.data.list_obj.title},null,8,Gs),a("input",{name:"output_path",type:"text",placeholder:"Output Path",value:t.data.list_obj.output_path,regex:"^[a-zA-Z\\d]{2,}$"},null,8,Ns),m(S,{elements:e.discord_roles,oIdKey:"id",oTitleKey:"name",title:"Discord Roles",preselect:t.data.list_obj.discord_roles,onSelectChanged:n[0]||(n[0]=s=>e.extRet.discord_roles=s)},null,8,["elements","preselect"]),a("label",null,[Ds,a("input",{name:"hidden_managers",type:"checkbox",checked:t.data.list_obj.hidden_managers,placeholder:"Hidden to managers"},null,8,qs)]),a("label",null,[Us,a("input",{name:"require_appr",type:"checkbox",checked:t.data.list_obj.require_appr,placeholder:"Require Approval"},null,8,Ks)])]),_:1},8,["onConfirmBtnClick","extRetProp"]))}}));const Vs={data(){return{config:{},config_tr:{web_server:"Web Server",app_personalization:"Personalization",squadjs:"SquadJS"},keys:[]}},props:{buttons:[]},methods:{getConfig:async function(){await fetch("/api/config/read/getFull").then(e=>e.json()).then(e=>{const n=Object.keys(e);for(let s of n)e[s]={type:"file",config:e[s]};this.config=e}),await fetch("/api/dbconfig/read/getFull").then(e=>e.json()).then(e=>{for(let n of e)this.config[n.category]={type:"db",config:n.config};console.log("config",this.config)});const t=Object.keys(this.config);this.keys=t.includes("app_personalization")?["app_personalization",...t.filter(e=>e!="app_personalization")]:t,this.selectMenu(this.config[this.keys[0]],this.keys[0])},getTranslation:function(t){const e=this.config_tr[t];return e||this.toUpperFirstChar(t.replace(/\_/g," "))},toUpperFirstChar:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},selectMenu:function(t,e){for(let n in this.config)this.config[n].selected=!1;t.selected=!0,this.$emit("menuChanged",{menu:e,config:t})}},created(){this.getConfig()}},Ws=["value","onClick"];function Hs(t,e,n,s,l,r){return o(),i("div",null,[(o(!0),i(_,null,k(l.keys,u=>(o(),i("button",{value:u,key:u,onClick:g=>r.selectMenu(l.config[u],u),class:P({active:l.config[u].selected})},c(r.getTranslation(u)),11,Ws))),128))])}var x=T(Vs,[["render",Hs],["__scopeId","data-v-468e20c4"]]);const Js={data(){return{content:this.modelValue,config_tr:{web_server:"Web Server",app_personalization:"Personalization"},legend:""}},name:"confLabelInput",props:{modelValue:null,confKey:{required:!0,type:String},currentConfigMenu:{required:!1,type:Object}},methods:{log:console.log,handleInput:function(t){let e=t.target.value;t.target.type==="checkbox"?e=t.target.checked:t.target.type==="number"&&(e=parseFloat(e)),this.$emit("update:modelValue",e)},getInputType:function(t){const e={string:"text",number:"number",boolean:"checkbox"};return t.toString().startsWith("#")?"color":e[typeof t]},getTranslation:function(t){const e=this.config_tr[t];return e||this.toUpperFirstChar(t.replace(/\_/g," "))},toUpperFirstChar:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},convHex6digs:function(t){return t.toString().startsWith("#")?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t}},created(){this.legend=this.toUpperFirstChar(this.confKey.replace(/\_/g," "))}},zs={key:0},Fs=["disabled"],Zs={key:1},Xs=["type","value","checked"];function Ys(t,e,n,s,l,r){const u=Y("confLabelInput",!0);return typeof l.content=="object"?(o(),i("fieldset",zs,[a("legend",null,c(l.legend.match(/^[\d]+$/)?+l.legend+1:l.legend),1),(o(!0),i(_,null,k(Object.keys(l.content),g=>(o(),f(u,{key:g,confKey:g,modelValue:l.content[g],"onUpdate:modelValue":A=>l.content[g]=A},null,8,["confKey","modelValue","onUpdate:modelValue"]))),128)),G(t.$slots,"default",{},void 0,!0),n.currentConfigMenu instanceof Array?(o(),i("button",{key:0,disabled:n.currentConfigMenu.length==1,style:{float:"right",width:"50px"},onClick:e[0]||(e[0]=g=>t.$emit("deleteArrayElement",n.confKey))},"-",8,Fs)):p("",!0)])):(o(),i("label",Zs,[$(c(r.getTranslation(n.confKey)),1),a("input",{type:r.getInputType(l.content),value:n.modelValue,checked:n.modelValue,onInput:e[1]||(e[1]=(...g)=>r.handleInput&&r.handleInput(...g))},null,40,Xs)]))}var E=T(Js,[["render",Ys],["__scopeId","data-v-612f166f"]]);const ee=t=>(q("data-v-106eaea6"),t=t(),U(),t),Qs={key:0,class:"ct"},xs={key:1,class:"ct"},eo=$(" Discord Server "),to=ee(()=>a("option",{value:"",hidden:"",selected:""},"Select a server",-1)),no=["value","selected"],so=$(" Whitelist updates channel "),oo=["value","selected"],ao=["disabled"],io={key:2,class:"ct"},lo={key:0},ro={key:1},uo=ee(()=>a("fieldset",null,[a("legend",null,"Attention"),a("b",null,"Non-seeding Time Deduction"),$(" applies only during seeding phase. ")],-1)),po={data(){return{currentConfigMenu:{},selectedMenu:"",config_tr:{},currentConfigType:"",discord_servers:[],discord_channels:[],discord_invite_link:"",game_groups:[],subcomponent_status:{squadjs:[]}}},methods:{log:console.log,getInputType:function(t){const e={string:"text",number:"number",boolean:"checkbox"};return t.toString().startsWith("#")?"color":e[typeof t]},configMenuChanged:function(t){let e=t.config.config;delete e.selected,this.selectedMenu=t.menu,this.currentConfigType=t.config.type,this.currentConfigMenu=e},getTranslation:function(t){const e=this.config_tr[t];return e||this.toUpperFirstChar(t.replace(/\_/g," "))},toUpperFirstChar:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},convHex6digs:function(t){return t.toString().startsWith("#")?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t},sendConfigToServer:function(t){const e={category:this.selectedMenu,config:this.currentConfigMenu};console.log("Saving_config:",this.selectedMenu,this.currentConfigType,this.currentConfigMenu);let n={};switch(this.currentConfigType){case"file":n={url:"/api/config/write/update"};break;case"db":n={url:"/api/dbconfig/write/update"};break}console.log("sending update to:",n),C.ajax(y(h({},n),{type:"post",data:JSON.stringify(e),dataType:"json",contentType:"application/json",timeout:6e4,success:s=>{s.status=="config_updated"?s.action=="reload"&&location.reload():console.error(s),t.closePopup()},error:s=>{t.closePopup(),console.error(s)}}))},getDiscordServers:function(){fetch("/api/discord/read/getServers").then(t=>t.json()).then(t=>{console.log(t),this.discord_servers=t})},getDiscordChannels:function(){fetch("/api/discord/read/getChannels").then(t=>t.json()).then(t=>{console.log(t),this.discord_channels=t})},getDiscordInviteLink:function(){fetch("/api/discord/read/inviteLink").then(t=>t.json()).then(t=>{console.log(t),this.discord_invite_link=t.url})},getGameGroups:async function(){await fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>(console.log(t),this.game_groups=t))},getSquadJSStatus:async function(){await fetch("/api/subcomponent/read/squadjs/status").then(t=>t.json()).then(t=>(console.log("SquadJS status",t),this.subcomponent_status.squadjs=t))},openNewTab:function(t){window.open(t,"_blank")},getProxyTarget(t){return t&&t.__getTarget?t.__getTarget():t},removeProxies(t){if(t=this.getProxyTarget(t),typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map(n=>this.removeProxies(n));const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=this.removeProxies(t[n]));return e},addArrayElement(){const t=h({},this.currentConfigMenu[0]),e=this.removeProxies(t);this.currentConfigMenu.push(h({},e))}},async beforeMount(){this.getDiscordServers(),this.getDiscordChannels(),this.getDiscordInviteLink(),this.getGameGroups(),this.getSquadJSStatus()},components:{SideMenu:x,tab:j,confLabelInput:E}},co=w(y(h({},po),{setup(t){return(e,n)=>(o(),i(_,null,[m(x,{onMenuChanged:e.configMenuChanged},null,8,["onMenuChanged"]),m(j,null,{default:v(()=>{var s,l,r,u,g,A;return[["discord_bot","seeding_tracker"].includes(e.selectedMenu)?e.selectedMenu=="discord_bot"?(o(),i("div",xs,[m(E,{confKey:"token",modelValue:e.currentConfigMenu.token,"onUpdate:modelValue":n[3]||(n[3]=d=>e.currentConfigMenu.token=d)},null,8,["modelValue"]),a("label",null,[eo,a("select",{onChange:n[4]||(n[4]=d=>e.currentConfigMenu.server_id=d.target.value)},[to,(o(!0),i(_,null,k(e.discord_servers,d=>(o(),i("option",{key:d.id,value:d.id,selected:d.id==e.currentConfigMenu.server_id},c(d.name),9,no))),128))],32)]),a("label",null,[so,a("select",{onChange:n[5]||(n[5]=d=>e.currentConfigMenu.whitelist_updates_channel_id=d.target.value)},[(o(!0),i(_,null,k(e.discord_channels,d=>(o(),i("option",{key:d.id,value:d.id,selected:d.id==e.currentConfigMenu.whitelist_updates_channel_id},c(d.name),9,oo))),128))],32)]),a("button",{style:{float:"right","padding-left":"30px","padding-right":"30px"},onClick:n[6]||(n[6]=d=>e.$emit("confirm",{title:"Save server configuration?",text:"Are you sure you want to change the server configuration? Bad configuration may result into multiple failures or temporary data loss.",callback:e.sendConfigToServer}))}," Save "),a("button",{disabled:e.discord_invite_link=="",onClick:n[7]||(n[7]=d=>e.openNewTab(e.discord_invite_link)),style:{background:"#5865f2",color:"#fff",float:"right","padding-left":"30px","padding-right":"30px"}}," Invite to Server ",8,ao)])):e.selectedMenu=="seeding_tracker"?(o(),i("div",io,[m(B,{text:"Reward Enabled",name:"reward_enabled",oTitleKey:"title",oIdKey:"id",inputHidden:!0,options:[{id:"true",title:"Yes"},{id:"false",title:"No"}],optionPreselect:e.currentConfigMenu.reward_enabled,onValueChanged:n[8]||(n[8]=d=>e.currentConfigMenu.reward_enabled=d.option)},null,8,["optionPreselect"]),m(B,{text:"Discord Seeding Reward Channel",name:"resetseedingtime",type:"number",placeholder:"Time",oTitleKey:"name",oIdKey:"id",inputHidden:!0,optionPreselect:e.currentConfigMenu.discord_seeding_reward_channel,options:e.discord_channels,onValueChanged:n[9]||(n[9]=d=>e.currentConfigMenu.discord_seeding_reward_channel=d.option)},null,8,["optionPreselect","options"]),m(B,{text:"Discord Seeding Score Channel",name:"resetseedingscoretime",type:"number",placeholder:"Time",oTitleKey:"name",oIdKey:"id",inputHidden:!0,optionPreselect:e.currentConfigMenu.discord_seeding_score_channel,options:e.discord_channels,onValueChanged:n[10]||(n[10]=d=>e.currentConfigMenu.discord_seeding_score_channel=d.option)},null,8,["optionPreselect","options"]),m(B,{text:"Reward Group",name:"rewardgroup",oTitleKey:"group_name",oIdKey:"_id",inputHidden:!0,options:e.game_groups,onValueChanged:n[11]||(n[11]=d=>e.currentConfigMenu.reward_group_id=d.option),optionPreselect:e.currentConfigMenu.reward_group_id},null,8,["options","optionPreselect"]),m(B,{text:"Live Player Count",name:"seeding_player_threshold",type:"number",onValueChanged:n[12]||(n[12]=d=>e.currentConfigMenu.seeding_player_threshold=d.value),value:e.currentConfigMenu.seeding_player_threshold},null,8,["value"]),m(B,{text:"Seeding Start Player Count",name:"seeding_player_threshold",type:"number",onValueChanged:n[13]||(n[13]=d=>e.currentConfigMenu.seeding_start_player_count=d.value),value:e.currentConfigMenu.seeding_start_player_count},null,8,["value"]),m(B,{text:"Tracking Mode",name:"tracking_mode",oTitleKey:"title",oIdKey:"id",inputHidden:!0,optionPreselect:e.currentConfigMenu.tracking_mode,options:[{id:"incremental",title:"Incremental"},{id:"fixed_reset",title:"Fixed Reset"}],onValueChanged:n[14]||(n[14]=d=>e.currentConfigMenu.tracking_mode=d.option)},null,8,["optionPreselect"]),m(B,{text:"Reward needed time",name:"resetseedingtime",type:"number",placeholder:"Time",oTitleKey:"title",oIdKey:"value",value:(s=e.currentConfigMenu.reward_needed_time)==null?void 0:s.value,optionPreselect:(l=e.currentConfigMenu.reward_needed_time)==null?void 0:l.option,options:[{title:"Hours",value:60*60*1e3},{title:"Days",value:24*60*60*1e3}],onValueChanged:n[15]||(n[15]=d=>e.currentConfigMenu.reward_needed_time={value:+d.value,option:d.option})},null,8,["value","optionPreselect"]),e.currentConfigMenu.tracking_mode=="fixed_reset"?(o(),i("div",lo,[m(B,{text:"Reset seeding time every",name:"resetseedingtime",type:"number",placeholder:"Time",oTitleKey:"title",oIdKey:"value",options:[{title:"Days",value:24*60*60*1e3},{title:"Weeks",value:7*24*60*60*1e3},{title:"Months",value:30*24*60*60*1e3}],value:(r=e.currentConfigMenu.reset_seeding_time)==null?void 0:r.value,optionPreselect:(u=e.currentConfigMenu.reset_seeding_time)==null?void 0:u.option,onValueChanged:n[16]||(n[16]=d=>e.currentConfigMenu.reset_seeding_time={value:+d.value,option:d.option})},null,8,["value","optionPreselect"]),m(B,{text:"Next Reset",name:"next_reset",type:"date",onValueChanged:n[17]||(n[17]=d=>e.currentConfigMenu.next_reset=d.value),value:e.currentConfigMenu.next_reset},null,8,["value"])])):p("",!0),e.currentConfigMenu.tracking_mode=="incremental"?(o(),i("div",ro,[m(B,{text:"Non-seeding Time Deduction",name:"resetseedingtime",type:"number",oTitleKey:"title",oIdKey:"value",options:[{title:"Point per Minute",value:"point_minute"},{title:"% per Minute",value:"perc_minute"}],value:((g=e.currentConfigMenu.time_deduction)==null?void 0:g.value)||.1,optionPreselect:(A=e.currentConfigMenu.time_deduction)==null?void 0:A.option,onValueChanged:n[18]||(n[18]=d=>e.currentConfigMenu.time_deduction={value:+d.value,option:d.option})},null,8,["value","optionPreselect"]),uo])):p("",!0),a("button",{style:{float:"right","padding-left":"30px","padding-right":"30px"},onClick:n[19]||(n[19]=d=>e.$emit("confirm",{title:"Save server configuration?",text:"Are you sure you want to change the server configuration? Bad configuration may result into multiple failures or temporary data loss.",callback:e.sendConfigToServer}))}," Save ")])):p("",!0):(o(),i("div",Qs,[(o(!0),i(_,null,k(Object.keys(e.currentConfigMenu),d=>(o(),f(E,{key:d,confKey:d,modelValue:e.currentConfigMenu[d],"onUpdate:modelValue":L=>e.currentConfigMenu[d]=L,"current-config-menu":e.currentConfigMenu,onDeleteArrayElement:n[0]||(n[0]=L=>e.currentConfigMenu=e.currentConfigMenu.filter((Xo,ne)=>ne!=L))},{default:v(()=>[e.selectedMenu=="squadjs"?(o(),f(B,{key:0,text:"Status",name:"",value:e.subcomponent_status.squadjs[d]?"Connected":"Not Connected",optional:"",readonly:""},null,8,["value"])):p("",!0)]),_:2},1032,["confKey","modelValue","onUpdate:modelValue","current-config-menu"]))),128)),a("button",{style:{float:"right",width:"100px"},onClick:n[1]||(n[1]=d=>e.$emit("confirm",{title:"Save server configuration?",text:"Are you sure you want to change the server configuration? Bad configuration may result into multiple failures or temporary data loss.",callback:e.sendConfigToServer}))}," Save "),e.currentConfigMenu instanceof Array?(o(),i("button",{key:0,style:{float:"right",width:"50px"},onClick:n[2]||(n[2]=(...d)=>e.addArrayElement&&e.addArrayElement(...d))},"+")):p("",!0)]))]}),_:1})],64))}}));var go=T(co,[["__scopeId","data-v-106eaea6"]]);const fo={data(){return{models:{searchPlayer:""},whitelist_clans:[],sel_clan:{},sel_clan_obj:{},wl_players:[],editor:!1,editor_lists:!1,record_refs:[],lists:[],sel_list_id:null,sel_list_obj:{},seeding_config:{reset_seeding_time:{value:null,option:null},reward_needed_time:{value:null,option:null},reward_group_id:null,seeding_player_threshold:40,next_reset:null,reward_enabled:null},game_groups:[]}},props:{user_session:{required:!0,default:{}}},methods:{log:console.log,getGameGroups:async function(){await fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>(console.log(t),this.game_groups=t))},getConfig:async function(){await fetch("/api/dbconfig/read/seeding_tracker").then(t=>t.json()).then(t=>(console.log(this.seeding_config),this.seeding_config=t))},pushConfigToDb:function(){console.log(this.seeding_config);const t=this.seeding_config.reset_seeding_time;!this.seeding_config.next_reset&&t&&(this.seeding_config.next_reset=new Date(new Date().valueOf()+t.value*t.option).toISOString().split("T")[0]);const e={category:"seeding_tracker",config:this.seeding_config};C.ajax({url:"/api/dbconfig/write/update",type:"post",data:JSON.stringify(e),dataType:"json",contentType:"application/json",timeout:6e4,success:n=>{console.log(n),location.reload()},error:n=>{console.error(n)}})},getPlayers:async function(){await fetch("/api/seeding/read/getPlayers").then(t=>t.json()).then(t=>(t=t.map(e=>y(h({},e),{approved:this.seeding_config.reward_enabled=="true"&&e.seeding_points>=this.seeding_config.reward_needed_time.value*this.seeding_config.reward_needed_time.option/1e3/60,percentageCompleted:Math.min(Math.floor(e.seeding_points*100/(this.seeding_config.reward_needed_time.value*this.seeding_config.reward_needed_time.option/1e3/60)))})).sort((e,n)=>n.percentageCompleted-e.percentageCompleted),console.log(t),this.wl_players=t))}},async created(){await this.getGameGroups(),await this.getConfig(),await this.getPlayers()},components:{AdvancedInput:B}},ho=w(y(h({},fo),{setup(t){return(e,n)=>(o(),i(_,null,[M(a("input",{type:"search",placeholder:"Search Player",name:"plrSearch","onUpdate:modelValue":n[0]||(n[0]=s=>e.models.searchPlayer=s)},null,512),[[N,e.models.searchPlayer]]),(o(!0),i(_,null,k(e.wl_players,s=>M((o(),f(H,{key:s,ref_for:!0,ref:l=>{e.record_refs.push(l)},wl_data:s,hoverMenuVisible:!1,"extra-tags":[`${s.percentageCompleted}%`]},null,8,["wl_data","extra-tags"])),[[I,s.username.toLowerCase().startsWith(e.models.searchPlayer.toLowerCase())||s.username.toLowerCase().includes(e.models.searchPlayer.toLowerCase())||R(K)(s.username.toLowerCase(),e.models.searchPlayer.toLowerCase())<=2||e.models.searchPlayer==""]])),128))],64))}}));var mo=T(ho,[["__scopeId","data-v-228add37"]]);const _o={class:"gameGroupCard shadow"},yo={class:"groupName tag"},vo={key:0,class:"tag"},Co=["src"],bo={disabled:!0,name:"roleSel",style:{width:"auto"}},ko=["value","selected","hidden"],wo={style:{color:"#ddd !important"}},$o={data(){return{onHover:!1,hoverMenuLeft:0,expirationTime:"",upd_int:-1}},props:{wl_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0},extraTags:{required:!1,default:[]},roles:{required:!0,default:{}}},methods:{deleteRecord:function(t,e=!1){console.log("Removing",this.$props.wl_data._id),C.ajax({url:`/api/keys/${this.$props.wl_data._id}`,type:"delete",success:n=>{t.closePopup&&t.closePopup(),e||this.$emit("removedApiKey",this.$props.wl_data)}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft},getHoursLeft:function(t=5){let e="00",n="00",s="00";const l=new Date(this.wl_data.expiration),r=new Date;if(l-r>0){const u=Math.floor((l-r)/1e3/60/60),g=Math.round(u/24),A=Math.round(g/30);if(u<24){const d=Math.floor((l-r)/1e3/60-u*60),L=Math.floor((l-r)/1e3-u*60*60-d*60);return e=(u<10?"0":"")+u,n=(d<10?"0":"")+d,s=(L<10?"0":"")+L,u<0&&(e="00"),d<0&&(n="00"),L<0&&(s="00"),console.log("Expiration",this.wl_data.username,this.wl_data.expiration,u,d,L,e,n,s),e+":"+n+":"+s}else return A<=0?g+" days":A+" months"}return""},startIntervalExpirTimeouts:function(t=5){this.expirationTime=this.getHoursLeft(t),this.upd_int=setInterval(()=>{this.expirationTime=this.getHoursLeft(t)},t*1e3)}},created:function(){this.startIntervalExpirTimeouts(1)},unmounted:function(){clearInterval(this.upd_int)}},To=w(y(h({},$o),{setup(t){return D(e=>({"46cce34e":e.hoverMenuLeft+"px"})),(e,n)=>(o(),i("div",_o,[a("span",{class:P(["dot",{fill:!0}])}),a("div",yo,c(t.wl_data.name),1),a("div",{class:"mainGroupContainer",onScroll:n[1]||(n[1]=(...s)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...s))},[t.wl_data.inserted_by?(o(),i("span",vo,[a("img",{src:R(W)},null,8,Co),$(c(t.wl_data.inserted_by[0].username),1)])):p("",!0),a("select",bo,[(o(!0),i(_,null,k(t.roles,s=>(o(),i("option",{value:s.access_level,key:s,selected:t.wl_data.access_level==s.access_level,hidden:s.access_level==0},c(s.name),9,ko))),128))]),a("span",wo,c(t.wl_data.token),1),t.hoverMenuVisible?(o(),i("div",{key:1,class:P(["hoverMenu",{vis:e.onHover}])},[a("button",{onClick:n[0]||(n[0]=s=>e.$emit("confirm",{wl_data:t.wl_data,callback:e.deleteRecord,title:"Confirm deletion?",message:`Do you really want to delete the api key ${t.wl_data.name}?`}))}," Delete ")],2)):p("",!0)],32)]))}}));var te=T(To,[["__scopeId","data-v-a36355ec"]]);const So=a("input",{name:"name",type:"text",placeholder:"Name"},null,-1),Ro={name:"access_level"},Ao=a("option",{hidden:"",selected:"",value:""},"Select a role",-1),jo=["value"],Bo={data(){return{discord_roles:[],extRet:{},sanRoles:{}}},props:{add_data:{required:!0,type:Object},editing:{required:!1,type:Boolean,default:!1},roles:{required:!0,type:Object}},methods:{confirmBtnClick:function(t){const e="/api/keys";t=h({},t),console.log("\u{1F680} ~ dt:",t);const n=this.$refs.popupLogin;console.log(this.$refs),C.ajax({url:e,type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:3e3,success:s=>{s.status=="created"?(this.add_data.callback(s.data),this.$emit("cancelBtnClick")):(console.error(s),n.blinkAll())},error:s=>{console.error(s),n.blinkAll()}})}},components:{popup:b,SelectMultiple:S},created(){const t=h({},this.roles);delete t[0],this.sanRoles=t}},Po=w(y(h({},Bo),{setup(t){return(e,n)=>(o(),f(b,{ref:"popupLogin",title:"New Api Key",onCancelBtnClick:n[0]||(n[0]=s=>e.$emit("cancelBtnClick",s)),onConfirmBtnClick:e.confirmBtnClick,extRetProp:e.extRet},{default:v(()=>[So,a("select",Ro,[Ao,(o(!0),i(_,null,k(e.sanRoles,s=>(o(),i("option",{value:s.access_level,key:s},c(s.name),9,jo))),128))])]),_:1},8,["onConfirmBtnClick","extRetProp"]))}}));const Lo=t=>(q("data-v-cfa15718"),t=t(),U(),t),Mo=Lo(()=>a("div",null,null,-1)),Io={data(){return{models:{search:""},elements:[],app_roles:[],editor:!1}},props:{user_session:{required:!0,default:{}},roles:{required:!0,default:[]}},methods:{log:console.log,appendAfterDone:function(t){console.log(t),this.elements.unshift(t)},removeElement(t){this.elements=this.elements.filter(e=>e._id!=t._id)},checkPerms:function(t=null){fetch("/api/keys/checkPerm").then(e=>e.json()).then(e=>{console.log("editor?",e),this.editor=!0,t&&t()})},async getAllApiKeys(){try{this.elements=await(await fetch("/api/keys")).json()}catch{}}},async created(){this.checkPerms(),this.getAllApiKeys()},components:{apiKeyCard:te}},Go=w(y(h({},Io),{setup(t){return(e,n)=>(o(),i(_,null,[Mo,M(a("input",{type:"search",placeholder:"Search Key",name:"searchKey","onUpdate:modelValue":n[0]||(n[0]=s=>e.models.search=s)},null,512),[[N,e.models.search]]),a("button",{class:"addHorizontal",onClick:n[1]||(n[1]=s=>e.$emit("addNewApiKey",{callback:e.appendAfterDone}))}),(o(!0),i(_,null,k(e.elements,s=>M((o(),f(te,{wl_data:s,roles:t.roles,key:s,hoverMenuVisible:e.editor,onConfirm:n[2]||(n[2]=l=>e.$emit("confirm",l)),onRemovedApiKey:e.removeElement},null,8,["wl_data","roles","hoverMenuVisible","onRemovedApiKey"])),[[I,s.name.toLowerCase().startsWith(e.models.search.toLowerCase())||R(K)(s.name.toLowerCase(),e.models.search.toLowerCase())<=2||e.models.search==""]])),128))],64))}}));var No=T(Go,[["__scopeId","data-v-cfa15718"]]),Do="/assets/bia_logo.71893359.png",qo="/assets/jd_logo.5121d5d5.png";const Uo=["src"],Ko={key:0},Oo={id:"hdBtnContainer"},Eo=a("h2",null,"Official Support",-1),Vo={style:{display:"flex","flex-wrap":"wrap","justify-content":"center"}},Wo=a("h2",null,"Special Thanks",-1),Ho={style:{display:"flex","flex-wrap":"wrap","justify-content":"center"}},Jo={class:"copyright"};var zo=new de(window.navigator.userAgent);const Fo={data(){return{mainRef:null,user_session:null,loginRequired:!0,app_title:"Squad Whitelister",header_title_hidden:!1,accent_color:"#ffc40b",currentTab:"Home",logo_url:"",logo_border_radius:10,version:"",tabs:[],tabBtns:[],popups:{addingNewClan:!1,addingNewGameGroup:!1,creatingNewRole:!1,confirm:!1,registration:!1,login:!1,editClan:!1,editGameGroup:!1,editClanUsers:!1,addNewWhitelistUser:!1,importWhitelist:!1,changepassword:!1,addNewList:!1,editList:!1,addEditApiKey:!1},favicon:"",clans:[],inEditingClan:-1,game_groups:[],inEditingGroup:-1,inUserEditingClan:-1,pointers:{confirmPopup:{},editClanUsers:{}},roles:[],tabData:{Whitelist:{add_data:{},new_list_data:{},edit_list_data:{}},Groups:{editor:!1},UsersAndRoles:{users:[],roles:[],userSearch:""},api_keys:{add_data:[]}}}},methods:{getAppPersonalization:function(){fetch("/api/getAppPersonalization").then(t=>t.json()).then(t=>{this.app_title=t.name,this.accent_color=t.accent_color,this.logo_url=t.logo_url,this.header_title_hidden=t.title_hidden_in_header,this.logo_border_radius=t.logo_border_radius,this.favicon=t.favicon})},checkSession:async function(){await fetch("/api/checkSession").then(t=>t.json()).then(t=>{this.user_session=t.userSession,this.setLoginRequired(t.status=="login_required"),console.log("User session",this.user_session)})},getTabs:async function(){await fetch("/api/getTabs").then(t=>t.json()).then(t=>{console.log(t),this.tabs=t.tabs,this.tabs.forEach(e=>this.tabBtns.push(e.name)),this.setCurrentTab(this.tabs[0].name)})},logout:function(){fetch("/api/logout").then(t=>t.json()).then(t=>{this.setLoginRequired(t.status=="logout_ok")})},getVersion:function(){fetch("/api/getVersion").then(t=>t.text()).then(t=>{this.version=t})},setLoginRequired:function(t){this.currentTab!="Root User Registration"&&(this.loginRequired=t,this.popups.login=t,this.popups.registration=t,t&&setTimeout(()=>{const e=document.getElementsByTagName("input")[0];console.log(e),e.focus()},10),this.setCurrentTab(t?"Login":this.tabs[0].name))},setCurrentTab:function(t){this.currentTab=t},appendNewClan:function(t){console.log("Appending new clan",t.clan_data),this.clans.push(t.clan_data)},appendNewGroup:function(t){console.log("Appending new group",t.clan_data),this.game_groups.push(t.data),this.popups.addingNewGameGroup=!1},getUsers:function(){fetch("/api/users/read/getAll").then(t=>t.json()).then(t=>{console.log("All users",t),this.tabData.UsersAndRoles.users=t})},getRoles:function(){fetch("/api/roles/read/getAll").then(t=>t.json()).then(t=>{console.log("All roles",t),this.tabData.UsersAndRoles.roles=t})},getRolesRet:async function(){return await(await fetch("/api/roles/read/getAll")).json()},getClans:function(){fetch("/api/clans/getAllClans").then(t=>t.json()).then(t=>{console.log("All clans",t),this.clans=t})},getGameGroups:function(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log("All groups",t),this.game_groups=t})},confirmEvt:function(t){this.confirmShow(t.title,t.text||t.message,t.callback)},confirmShow:function(t="",e="",n){this.popups.confirm=!0;const s={closePopup:()=>{this.popups.confirm=!1}};this.pointers.confirmPopup!=null&&(this.pointers.confirmPopup.setProps(t,e),this.pointers.confirmPopup.setCallback(()=>{n(s)}))},clearAdminList:function(t){console.log("clearing entire admin list"),this.confirmShow("Confirm clearing?","Do you really want to delete entire list for this clan?",()=>{t.callback(),this.popups.confirm=!1})},removeClan:function(t){this.confirmShow("Confirm deletion?","Do you really want to delete "+t.clan_data.tag+" clan?",()=>{t.callback(()=>{this.clans=this.clans.filter(e=>e._id!=t.clan_data._id),this.popups.confirm=!1})})},removeWhitelistPlayer:function(t){this.confirmShow("Confirm deletion?","Do you really want to delete "+t.wl_data.username+"?",()=>{t.callback(()=>{this.popups.confirm=!1})})},removeGroup:function(t){this.confirmShow("Confirm deletion?","Do you really want to delete "+t.group_data.group_name+" group?",()=>{t.callback(()=>{this.game_groups=this.game_groups.filter(e=>e._id!=t.group_data._id),this.popups.confirm=!1})})},removeUser:function(t){this.confirmShow("Delete User?","Do you really want to delete "+t.username+"?",()=>{t.callback(()=>{this.popups.confirm=!1,this.tabData.UsersAndRoles.users=this.tabData.UsersAndRoles.users.filter(e=>e._id!=t._id)})})},updateJson:function(t,e){for(let n in e){const s=Object.prototype.toString.call(e[n]),l=Object.prototype.toString.call(e);if(t[n]==null||t[n]&&l=="[object Array]"&&!t[n].includes(e[n]))switch(s){case"[object Object]":t[n]={};break;case"[object Array]":t[n]=[];break;default:l=="[object Array]"?t.push(e[n]):t[n]=e[n];break}typeof e[n]=="object"&&this.updateJson(t[n],e[n])}},checkPerms:function(t,e=n=>{}){fetch(t).then(n=>n.json()).then(n=>{console.log("editor?",n),e(n)})},evtTest:function(t){console.log("evt test: ",t)},log:console.log},async created(){this.getVersion(),await this.getTabs(),this.checkSession(),this.getAppPersonalization(),zo.mobile()!=null&&document.body.classList.add("mobile"),this.roles=await this.getRolesRet(),this.log("Roles",this.roles)}},Zo=w(y(h({},Fo),{setup(t){return D(e=>({"639de20c":e.accent_color})),(e,n)=>(o(),i(_,null,[a("title",null,c(e.currentTab?e.currentTab+" | ":"")+c(e.app_title),1),a("header",null,[a("img",{alt:"Squad Whitelister Logo",class:"logo",src:e.logo_url,style:ue({"border-radius":e.logo_border_radius+"px"})},null,12,Uo),e.header_title_hidden?p("",!0):(o(),i("h1",Ko,c(e.app_title),1)),a("div",Oo,[e.loginRequired?p("",!0):(o(),i("button",{key:0,onClick:n[0]||(n[0]=s=>e.popups.changepassword=!0)},"Change Password")),e.loginRequired?p("",!0):(o(),i("button",{key:1,onClick:n[1]||(n[1]=(...s)=>e.logout&&e.logout(...s))},"Logout")),e.loginRequired?(o(),i("button",{key:2,onClick:n[2]||(n[2]=s=>e.popups.login=!0)},"Login")):p("",!0),e.loginRequired?(o(),i("button",{key:3,onClick:n[3]||(n[3]=s=>e.popups.registration=!0)},"Sign Up")):p("",!0)]),m(Me,{visible:!e.loginRequired},{default:v(()=>[(o(!0),i(_,null,k(e.tabBtns,s=>(o(),f(Ne,{key:s,onUpdateTab:e.setCurrentTab,title:s,currentTab:e.currentTab},null,8,["onUpdateTab","title","currentTab"]))),128))]),_:1},8,["visible"])]),a("main",null,[M(m(me,null,{default:v(()=>[e.popups.login?(o(),f(we,{key:0,onCancelBtnClick:n[4]||(n[4]=s=>e.popups.login=!1),onLogin_done:n[5]||(n[5]=s=>{e.loginRequired=!1,e.popups.login=!1})})):p("",!0),e.popups.registration?(o(),f(Z,{key:1,onCancelBtnClick:n[6]||(n[6]=s=>e.popups.registration=!1)})):p("",!0),e.popups.changepassword?(o(),f(As,{key:2,onCancelBtnClick:n[7]||(n[7]=s=>e.popups.changepassword=!1)})):p("",!0),e.popups.addingNewClan?(o(),f(Ye,{key:3,onCancelBtnClick:n[8]||(n[8]=s=>e.popups.addingNewClan=!1),onNew_clan:e.appendNewClan},null,8,["onNew_clan"])):p("",!0),e.popups.addingNewGameGroup?(o(),f(dt,{key:4,onCancelBtnClick:n[9]||(n[9]=s=>e.popups.addingNewGameGroup=!1),onNew_game_group:e.appendNewGroup},null,8,["onNew_game_group"])):p("",!0),M(m(bt,{ref:s=>{e.pointers.confirmPopup=s},onCancelBtnClick:n[10]||(n[10]=s=>e.popups.confirm=!1)},null,512),[[I,e.popups.confirm]]),e.popups.editClan?(o(),f(at,{key:5,onCancelBtnClick:n[11]||(n[11]=s=>e.popups.editClan=!1),clan_data:e.clans[e.inEditingClan],onClan_edited:n[12]||(n[12]=s=>e.clans[e.inEditingClan]=s)},null,8,["clan_data"])):p("",!0),e.popups.editGameGroup?(o(),f(Lt,{key:6,onCancelBtnClick:n[13]||(n[13]=s=>e.popups.editGameGroup=!1),group_data:e.game_groups[e.inEditingGroup],onEdited:n[14]||(n[14]=s=>e.game_groups[e.inEditingGroup]=s)},null,8,["group_data"])):p("",!0),e.popups.editClanUsers?(o(),f(It,{key:7,clan_data:e.clans[e.inUserEditingClan],onCancelBtnClick:n[15]||(n[15]=s=>e.popups.editClanUsers=!1)},null,8,["clan_data"])):p("",!0),e.popups.addNewWhitelistUser?(o(),f(bn,{key:8,onCancelBtnClick:n[16]||(n[16]=s=>e.popups.addNewWhitelistUser=!1),add_data:e.tabData.Whitelist.add_data},null,8,["add_data"])):p("",!0),e.popups.importWhitelist?(o(),f(us,{key:9,onCancelBtnClick:n[17]||(n[17]=s=>e.popups.importWhitelist=!1),add_data:e.tabData.Whitelist.add_data},null,8,["add_data"])):p("",!0),e.popups.addNewList?(o(),f(Is,{key:10,onCancelBtnClick:n[18]||(n[18]=s=>e.popups.addNewList=!1),add_data:e.tabData.Whitelist.new_list_data},null,8,["add_data"])):p("",!0),e.popups.editList?(o(),f(Es,{key:11,onCancelBtnClick:n[19]||(n[19]=s=>e.popups.editList=!1),data:e.tabData.Whitelist.edit_list_data},null,8,["data"])):p("",!0),e.popups.addEditApiKey?(o(),f(Po,{key:12,onCancelBtnClick:n[20]||(n[20]=s=>e.popups.addEditApiKey=!1),add_data:e.tabData.api_keys.add_data,roles:e.roles},null,8,["add_data","roles"])):p("",!0)]),_:1},512),[[I,e.popups.addingNewClan||e.popups.addingNewGameGroup||e.popups.confirm||e.popups.login||e.popups.registration||e.popups.editClan||e.popups.editGameGroup||e.popups.editClanUsers||e.popups.addNewWhitelistUser||e.popups.importWhitelist||e.popups.changepassword||e.popups.addNewList||e.popups.editList||e.popups.addEditApiKey]]),e.currentTab=="Home"?(o(),f(j,{key:0,currentTab:e.currentTab},null,8,["currentTab"])):e.currentTab=="Root User Registration"?(o(),f(j,{key:1,currentTab:e.currentTab},{default:v(()=>[m(Z,{root_user_registration:!0})]),_:1},8,["currentTab"])):e.currentTab=="Updating"?(o(),f(j,{key:2,currentTab:e.currentTab},{default:v(()=>[m(b,{ref:"popupLogin",title:"Update in progress","hide-confirm":!0,"hide-cancel":!0,style:{margin:"auto"}},null,512)]),_:1},8,["currentTab"])):e.currentTab=="Clans"?(o(),f(j,{key:3,currentTab:e.currentTab,horizontal:!0,onVnodeMounted:e.getClans},{default:v(()=>[a("button",{class:"addNewClan clanCard",onClick:n[21]||(n[21]=s=>e.popups.addingNewClan=!0)}),(o(!0),i(_,null,k(e.clans,s=>(o(),f(yt,{onConfirm:e.removeClan,key:s,class:"clanCard shadow",clan_data:s,onEdit_clan:l=>{e.popups.editClan=!0,e.inEditingClan=e.clans.indexOf(s)},onEdit_clan_users:l=>{e.popups.editClanUsers=!0,e.inUserEditingClan=e.clans.indexOf(s)}},null,8,["onConfirm","clan_data","onEdit_clan","onEdit_clan_users"]))),128))]),_:1},8,["currentTab","onVnodeMounted"])):e.currentTab=="Groups"?(o(),f(j,{key:4,currentTab:e.currentTab,onVnodeMounted:n[23]||(n[23]=()=>{e.getGameGroups(),e.checkPerms("/api/gameGroups/write/checkPerm",s=>{e.tabData.Groups.editor=!!s})})},{default:v(()=>[e.tabData.Groups.editor?(o(),i("button",{key:0,class:"addNewGameGroup",onClick:n[22]||(n[22]=s=>e.popups.addingNewGameGroup=!0)})):p("",!0),(o(!0),i(_,null,k(e.game_groups,s=>(o(),f(Rt,{onConfirm:e.removeGroup,key:s,class:"gameGroupCard shadow",group_data:s,onEdit:l=>{e.popups.editGameGroup=!0,e.inEditingGroup=e.game_groups.indexOf(s)},hoverMenuVisible:e.tabData.Groups.editor},null,8,["onConfirm","group_data","onEdit","hoverMenuVisible"]))),128))]),_:1},8,["currentTab"])):e.currentTab=="Roles"?(o(),f(j,{key:5,currentTab:e.currentTab},{default:v(()=>[a("button",{class:"createRole",onClick:n[24]||(n[24]=s=>e.popups.creatingNewRole=!0)})]),_:1},8,["currentTab"])):e.currentTab=="Whitelist"?(o(),f(j,{key:6,currentTab:e.currentTab},{default:v(()=>[m(ln,{user_session:e.user_session,onAddNewWhitelistUser:n[25]||(n[25]=s=>{e.popups.addNewWhitelistUser=!0,e.tabData.Whitelist.add_data=s}),onConfirm:e.removeWhitelistPlayer,onImport_whitelist:n[26]||(n[26]=s=>{e.popups.importWhitelist=!0,e.tabData.Whitelist.add_data=s}),onConfirm_clearing:e.clearAdminList,onAddNewList:n[27]||(n[27]=s=>{e.popups.addNewList=!0,e.tabData.Whitelist.new_list_data=s}),onConfirm_standard:e.confirmEvt,onEditList:n[28]||(n[28]=s=>{e.popups.editList=!0,e.tabData.Whitelist.edit_list_data=s})},null,8,["user_session","onConfirm","onConfirm_clearing","onConfirm_standard"])]),_:1},8,["currentTab"])):e.currentTab=="Approvals"?(o(),f(j,{key:7,currentTab:e.currentTab},{default:v(()=>[m(zn)]),_:1},8,["currentTab"])):e.currentTab=="Seeding"?(o(),f(j,{key:8,currentTab:e.currentTab},{default:v(()=>[m(mo)]),_:1},8,["currentTab"])):e.currentTab=="Users and Roles"?(o(),f(j,{key:9,currentTab:e.currentTab,onVnodeMounted:n[30]||(n[30]=()=>{e.getUsers(),e.getRoles()})},{default:v(()=>[M(a("input",{type:"search",placeholder:"Search User",name:"usrSearch",id:"","onUpdate:modelValue":n[29]||(n[29]=s=>e.tabData.UsersAndRoles.userSearch=s)},null,512),[[N,e.tabData.UsersAndRoles.userSearch]]),(o(!0),i(_,null,k(e.tabData.UsersAndRoles.users,s=>M((o(),f(ws,{key:s,user_data:s,roles:e.tabData.UsersAndRoles.roles,onDeleteRecord:e.removeUser},null,8,["user_data","roles","onDeleteRecord"])),[[I,s.username.toLowerCase().startsWith(e.tabData.UsersAndRoles.userSearch.toLowerCase())||R(K)(s.username.toLowerCase(),e.tabData.UsersAndRoles.userSearch.toLowerCase())<=2||e.tabData.UsersAndRoles.userSearch==""]])),128))]),_:1},8,["currentTab"])):e.currentTab=="API"?(o(),f(j,{key:10,currentTab:e.currentTab,roles:e.roles},{default:v(()=>[m(No,{roles:e.roles,onConfirm:e.confirmEvt,onAddNewApiKey:n[31]||(n[31]=s=>{e.popups.addEditApiKey=!0,e.tabData.api_keys.add_data=s})},null,8,["roles","onConfirm"])]),_:1},8,["currentTab","roles"])):e.currentTab=="Configuration"?(o(),f(j,{key:11,currentTab:e.currentTab,complex:""},{default:v(()=>[m(go,{onConfirm:e.confirmEvt},null,8,["onConfirm"])]),_:1},8,["currentTab"])):p("",!0)]),a("footer",null,[Eo,a("div",Vo,[m(O,{title:"JetDave Development | Fantino Davide",src:R(qo),discord:"https://discord.com/invite/5hfcjNYdCP",github:"https://github.com/fantinodavide/Squad_Whitelister"},null,8,["src"])]),Wo,a("div",Ho,[m(O,{title:"Brigata Italiana Ariete",src:R(Do),website:"https://biaclan.it/",discord:"https://discord.gg/dXHVfQZcxJ"},null,8,["src"]),m(O,{title:"Offworld Industries",website:"https://www.offworldindustries.com/",src:"https://www.offworldindustries.com/wp-content/themes/owitheme/img/logo_white.svg",discord:"https://discord.com/invite/kRkqJgXW"})]),a("span",Jo," \xA9 "+c(new Date().getFullYear())+" Squad Whitelister, V"+c(e.version)+", JetDave | Fantino Davide ",1)])],64))}}));pe(Zo).mount("#app");
